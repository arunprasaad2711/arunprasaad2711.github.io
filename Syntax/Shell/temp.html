<h1 id="shell-programming">Shell Programming</h1>
<h2 id="source">Source</h2>
<ul>
<li>Shell Scripting Tutorials - “The Bad Tutorials” - YouTube channel.</li>
<li>Unix and Shell Programming - “Fuzicast” - YouTube channel.</li>
</ul>
<p>Basic programming language for Unix. Applicable for Linux as well. Shell is the interface between the linux kernel and the user. The kernel makes the hardware do the job!</p>
<p>There are different types of shell.</p>
<ul>
<li>Bash</li>
<li>sh</li>
<li>csh</li>
<li>tcsh</li>
<li>ksh</li>
</ul>
<p>All of them are similar and have some small differences.</p>
<p>To access a shell, start a terminal.</p>
<h2 id="inside-the-terminal">Inside the terminal</h2>
<p>On opening the terminal, there will be a line like below.</p>
<div class ="highlight"><pre>arun@hpdv6:~$</pre></div>
<p>It stands for username followed by machine name. The ~ sign shows the path and <code>$</code> is the command prompt. All commands are in lowercase.</p>
<h2 id="basic-commands">Basic commands</h2>
<p><strong>clear</strong> - clears the terminal screen</p>
<p><strong>who am i</strong> - Prints the username, terminal id and the time/date of logging in</p>
<p><strong>pwd</strong> - prints the present working directory</p>
<p><strong>mkdir</strong> - make a directory.</p>
<div class="highlight"><pre><span></span>mkdir folder1 folder2
mkdir path/of/folder/folder_name
</pre></div>

<p><strong>rmdir</strong> - delete a directory.</p>
<div class="highlight"><pre><span></span>rmdir folder1 folder2
rmdir path/of/folder/folder_name
</pre></div>

<p><strong>ls</strong> - list the contents of the present working directory</p>
<p><strong>cal</strong> - prints the calendar month and highlights the current day. To print the calendar of some other month and year, use</p>
<div class="highlight"><pre><span></span>cal month_number year
cal month_name<span class="o">(</span>short/long<span class="o">)</span> year
</pre></div>

<p><strong>date</strong> - prints the day, month, date, year, full 24-hour time and time zone. To custom represent time, use the format.</p>
<div class="highlight"><pre><span></span>date +<span class="s1">&#39;DATE:%m-%y%nTIME:%H:%M%S&#39;</span>
</pre></div>

<p>m - month, y - year, n - new line, H - hour, M - minute, S- seconds</p>
<p><strong>touch</strong> - used to create empty text files.</p>
<div class="highlight"><pre><span></span>touch test1 test2 test3
</pre></div>

<p><strong>cd</strong> - change directory</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> new/path
</pre></div>

<p><strong>cat</strong> - used to write contents inside the text files. Also used to read the contents.</p>
<div class="highlight"><pre><span></span>cat &gt; filename <span class="c1">#Press enter</span>
<span class="c1"># write contents # terminate using CTRL+D</span>

cat &lt; filename <span class="c1">#press enter. </span>
<span class="c1">#This will display the cotents of the file. </span>
<span class="c1">#The lesser than symbol is optional, but use it as a practice.</span>

cat file1 file2 &gt; file3
<span class="c1"># merges file1 and file2 into file3</span>
</pre></div>

<p><strong>mv</strong> - move file/folder. Also, used for renaming file/folder</p>
<div class="highlight"><pre><span></span>mv path/to/filename1 path/to/filename2
</pre></div>

<p><strong>rm</strong> - removes file/folder. Use -r flag to remove folders.</p>
<div class="highlight"><pre><span></span>rm file
</pre></div>

<p><strong>cp</strong> - copy files</p>
<div class="highlight"><pre><span></span>cp path/to/source path/to/destination
</pre></div>

<p><strong>ln</strong> - link files</p>
<div class="highlight"><pre><span></span>ln source_file target_file.
<span class="c1"># now, if any modification is done to &quot;source_file&quot;, then the </span>
<span class="c1"># modifications are reflected in &quot;target_file&quot; - hard link</span>
<span class="c1"># Now, if the source file is deleted, then the target file will</span>
<span class="c1"># be intact.</span>
ln -s source_file target_file
<span class="c1"># This creates a short-cut.</span>
</pre></div>

<h2 id="comments">Comments</h2>
<p>Use <strong>#</strong> to start a single line comment.</p>
<div class="highlight"><pre><span></span><span class="c1"># this is a single-line comment</span>
<span class="s">&lt;&lt;COMMENT</span>
<span class="s">This is a multi-line</span>
<span class="s">comment. It extends for several lines.</span>
<span class="s">This is one way using manual delimiters.</span>
<span class="s">COMMENT</span>
&lt;&lt;!
This is another multi-line
comment. It extends <span class="k">for</span> several lines.
This is another way using manual delimiters.
!
</pre></div>

<h2 id="file-permissions">File permissions</h2>
<p>Files and folders have certain permissions: read, write and execute. The permissions have numerical values: read-4, write-2, execute-1. Based on the permissions, a file that is created or modified has a numerical value which is the sum of the numerical values associated with the permissions. A file will have the numeric values 4(read-only), 5(read and execute), 6(read and write), 7(read,write,execute).</p>
<p>And there are three categories of users: owner(the one who created the file), group(the group of users in the system/network) and others(users outside the system/network). And depending on the category of the users, the permission privileges vary.</p>
<p>The command <strong><code>umask</code></strong> tells what kind of permissions exist for the files and folders when created.</p>
<p>On typing the command <strong><code>umask</code></strong>, a 4 digit number like <strong>0022</strong> or <strong>0002</strong> might show up. The first zero on the left is for indicating Octal numbers. The second digit is for the owner, the third digit for group and the fourth digit for others.</p>
<p>Whenever a file/folder is created, the Linux/Unix OS subtracts the <strong>umask</strong> value from <strong>0777</strong> for the files and <strong>0666</strong> for the folders. So, for a file, if the resulting number turns out to be <strong>0755</strong>, it means the owner has all three premissions, while others and group can only read and execute.</p>
<p><strong>Folders need execution permission! Otherwise, they cannot be accessed!</strong></p>
<h2 id="ls-command">ls command</h2>
<p><strong>ls</strong> lists all the files and folders in the folder.</p>
<div class="highlight"><pre><span></span>ls path/to/folder 
<span class="c1"># lists all the files and folders in the path specified.</span>

ls -l             <span class="c1"># l - long listing flag</span>
<span class="c1"># lists all the files and folders with permissions</span>
<span class="c1"># , user details, date/time of modifications</span>
</pre></div>

<p>On typing <code>ls -l</code>, one might get an output like this:</p>
<div class="highlight"><pre><span></span>total <span class="m">100</span>
drwxrwxrwx  <span class="m">8</span> arun arun  <span class="m">4096</span> Sep <span class="m">28</span> <span class="m">21</span>:55 Academic_Stuff
drwxrwxr-x <span class="m">18</span> arun arun  <span class="m">4096</span> Oct <span class="m">10</span> <span class="m">05</span>:50 anaconda3
drwxr-xr-x  <span class="m">9</span> arun arun  <span class="m">4096</span> Oct  <span class="m">7</span> <span class="m">03</span>:49 Desktop
drwxr-xr-x  <span class="m">2</span> arun arun  <span class="m">4096</span> Sep  <span class="m">3</span> <span class="m">19</span>:26 Documents
drwxr-xr-x  <span class="m">5</span> arun arun  <span class="m">4096</span> Oct <span class="m">15</span> <span class="m">11</span>:47 Downloads
drwxrwxrwx  <span class="m">3</span> arun arun  <span class="m">4096</span> Jul  <span class="m">3</span> <span class="m">00</span>:21 Drive
drwx------ <span class="m">22</span> arun arun  <span class="m">4096</span> Oct <span class="m">15</span> <span class="m">08</span>:22 Dropbox
-rwxrwxrwx  <span class="m">1</span> arun arun  <span class="m">8980</span> Jul  <span class="m">9</span> <span class="m">19</span>:37 examples.desktop
drwxrwxrwx  <span class="m">4</span> arun arun  <span class="m">4096</span> Jul  <span class="m">9</span> <span class="m">23</span>:39 Google_Drive
drwxrwxrwx  <span class="m">4</span> arun arun  <span class="m">4096</span> May  <span class="m">6</span> <span class="m">16</span>:25 hp_usb
drwxr-xr-x  <span class="m">2</span> arun arun  <span class="m">4096</span> Aug <span class="m">21</span> <span class="m">03</span>:31 Music
drwxrwxrwx  <span class="m">2</span> arun arun  <span class="m">4096</span> Jun <span class="m">29</span> <span class="m">15</span>:56 pen_drive
drwxr-xr-x  <span class="m">3</span> arun arun  <span class="m">4096</span> Sep <span class="m">29</span> <span class="m">00</span>:15 Pictures
drwxrwxrwx <span class="m">29</span> arun arun  <span class="m">4096</span> Aug <span class="m">22</span> <span class="m">01</span>:09 Program_Workspace
drwxr-xr-x  <span class="m">2</span> arun arun  <span class="m">4096</span> Aug <span class="m">21</span> <span class="m">03</span>:31 Public
-rw-rw-r--  <span class="m">1</span> arun arun <span class="m">11221</span> Sep <span class="m">28</span> <span class="m">14</span>:25 simrad_transp_sw_opaq_lw.m
drwxrwxrwx  <span class="m">8</span> arun arun  <span class="m">4096</span> Aug <span class="m">21</span> <span class="m">21</span>:27 Software
drwxr-xr-x  <span class="m">2</span> arun arun  <span class="m">4096</span> Aug <span class="m">21</span> <span class="m">03</span>:31 Templates
drwxr-xr-x  <span class="m">3</span> arun arun  <span class="m">4096</span> Oct <span class="m">15</span> <span class="m">16</span>:09 Videos
drwxrwxr-x  <span class="m">3</span> arun arun  <span class="m">4096</span> Oct <span class="m">16</span> <span class="m">14</span>:45 VirtualBox VMs
</pre></div>

<p>The value <code>total 100</code> indicates the total number of blocks occupied by all the files and folders in the directory. Here, it is 100 blocks. 1 block is a unit of memory for file allocation in unix/linux which is equal to a certain amount of bytes.</p>
<p>The first column is a 10 units long string. For a file, the first unit of the string is a <strong>-</strong>, whereas for a folder, it is <strong>d</strong> indicating that it is a directory.</p>
<p>Units 2-4, 5-7 and 8-10 indicate the permissions for the owner, group and others. <strong>r</strong> means read, <strong>w</strong> means write and <strong>x</strong> means execute. Here, <strong>-</strong> means that permission is absent.</p>
<p>Column 2 (i guess) indicates the number of blocks occupied by the file or folder.</p>
<p>Column 3 and 4 indicated the owner and the group name.</p>
<p>Column 5 indicates the size of the file in bytes. For folders, it indicates the size of the parent folder alone without any of the contents inside it.</p>
<p>Column 6-8 indicate the date and time of creation/last modification/access of the file or folder.</p>
<p>Column 9 indicates the file/folder name.</p>
<h3 id="creating-hidden-files">Creating hidden files</h3>
<p>Put a dot infront of the file name to hide it.</p>
<p>Use <code>ls -a</code> to list ALL files, including hidden files.</p>
<h2 id="chmod-command">chmod command</h2>
<p>Changes the file/folder permissions manually.</p>
<div class="highlight"><pre><span></span>chmod <span class="m">777</span> filename
<span class="c1"># makes the permission string for the file as -rwxrwxrwx</span>
chmod <span class="m">444</span> filename
<span class="c1"># makes the permission string for the file as -r--r--r--</span>
chmod <span class="m">755</span> filename
<span class="c1"># makes the permission string for the file as -rwxrw-rw-</span>
chmod -w filename
<span class="c1"># Removes write permissions for the file</span>
chmod +x filename
<span class="c1"># Adds write permissions for the file</span>
</pre></div>

<p>Minus sign <strong>-</strong> is used to remove a permission. Plus sign <strong>+</strong> is used to add permission. The permissions are read, write and execute <strong>r,w,x</strong>.</p>
<p>Executable files are displayed in <strong>green</strong> colour inside the terminal.</p>
<h2 id="uname-command">uname command</h2>
<p>Prints the kernel and some system details of the OS.</p>
<div class="highlight"><pre><span></span>uname
uname -a <span class="c1"># list all details</span>
</pre></div>

<p>The output is:</p>
<div class ="highlight"><pre>Linux
Linux hpdv6 4.4.0-42-generic #62-Ubuntu SMP Fri Oct 7 23:11:45 UTC 2016
x86_64 x86_64 x86_64 GNU/Linux</pre></div>
<p>The details are in order: Kernel name, device name, Kernel version, OS name with some specification, Memory Architecture - SMP means Shared memory Processor, Date and time of installing/updating the kernel, Assembly language of the system for owner(x86_64 - assembly language for 64 bit systems), group and others, Kind of Unix/Linux.</p>
<h2 id="file-and-wc-command">File and wc command</h2>
<p>File command mentions the file type/directory in a given path.</p>
<div class="highlight"><pre><span></span>arun@hpdv6:~/Desktop/Python_Session/main$ file *
demo.ipynb:                 ASCII text, with very long lines
eVSes.png:                  PNG image data, <span class="m">1200</span> x <span class="m">800</span>, <span class="m">8</span>-bit/color RGBA, 
                            non-interlaced
eVsZ.png:                   PNG image data, <span class="m">1200</span> x <span class="m">800</span>, <span class="m">8</span>-bit/color RGBA, 
                            non-interlaced
IISc_logo.jpg:              JPEG image data, JFIF standard <span class="m">1</span>.01, resolution
                            <span class="o">(</span>DPI<span class="o">)</span>, density 150x150, segment length <span class="m">16</span>, 
                            comment: <span class="s2">&quot;Software: Microsoft Office&quot;</span>, baseline, 
                            precision <span class="m">8</span>, 555x523, frames <span class="m">1</span>
IQ_hist.png:                PNG image data, <span class="m">1200</span> x <span class="m">800</span>, <span class="m">8</span>-bit/color RGBA, 
                            non-interlaced
iris_ex01.py~:              Python script, ASCII text executable
ncfile1.nc:                 NetCDF Data Format data
ncfile2.nc:                 NetCDF Data Format data
python.png:                 PNG image data, <span class="m">518</span> x <span class="m">588</span>, <span class="m">8</span>-bit grayscale, 
                            on-interlaced
Python_Session.html:        HTML document, ASCII text, with very long lines
Python_Session.ipynb:       ASCII text, with very long lines
Python_Session.slides.html: HTML document, ASCII text, with very long lines
rain_data2.txt:             ASCII text
rain_data.txt:              ASCII text
sample.ipynb:               ASCII text, with very long lines
sample.slides.html:         HTML document, ASCII text, with very long lines
swiss_knife.jpg:            JPEG image data, Exif standard: <span class="o">[</span>TIFF image 
                            data, little-endian, <span class="nv">direntries</span><span class="o">=</span><span class="m">0</span><span class="o">]</span>, baseline, 
                            precision <span class="m">8</span>, 2908x2248, frames <span class="m">3</span>
</pre></div>

<p><strong>wc</strong> shows the number of lines, words and characters in a file.</p>
<div class="highlight"><pre><span></span>arun@hpdv6:~/Desktop$ wc simulation_group.txt <span class="c1"># use -l, -w, -c to display</span>
                                         <span class="c1"># only lines, words or characters</span>
 <span class="m">31</span>  <span class="m">76</span> <span class="m">468</span> simulation_group.txt
</pre></div>

<h2 id="sort-command">Sort command</h2>
<p>Extracts all the words and sorts the contents in a file.</p>
<div class="highlight"><pre><span></span>sort filename.ext
</pre></div>

<p>Typing plain sort opens the terminal to write words. When pressing Ctrl+D, the words are sorted and displayed.</p>
<h2 id="cut-command">Cut command</h2>
<p>Used to cut the contents in the file and separates them.</p>
<div class="highlight"><pre><span></span>cut -d<span class="s2">&quot;-&quot;</span> -f <span class="m">1</span>,3 filename
<span class="c1"># -d means explaining other characters are used to separate the data.</span>
<span class="c1"># &quot;-&quot; is used for specifying the separator here</span>
<span class="c1"># -f means the fields</span>
<span class="c1"># 1, 3 column numbers in the file</span>
<span class="c1"># filename</span>
</pre></div>

<h2 id="dd-command">dd command</h2>
<p>Used to convert and copy files from one format to another.</p>
<div class="highlight"><pre><span></span>dd <span class="k">if</span><span class="o">=</span><span class="s2">&quot;test&quot;</span> <span class="nv">of</span><span class="o">=</span><span class="s2">&quot;out&quot;</span> <span class="nv">conv</span><span class="o">=</span>ucase
<span class="c1">## if = input file</span>
<span class="c1">## of = output file</span>
<span class="c1">## conv = type of conversion, here, the contents become uppercase.</span>
dd <span class="k">if</span><span class="o">=</span><span class="s2">&quot;test&quot;</span> <span class="nv">of</span><span class="o">=</span><span class="s2">&quot;out&quot;</span> <span class="nv">conv</span><span class="o">=</span>ebcdic
<span class="c1">## here, the contents get converted into European format.</span>
</pre></div>

<p>dd is used for formatting drives, extracting data from drives, copy files to drives, convert files from/to drives.</p>
<h2 id="man-command">man command</h2>
<p>Used for displaying the manual for a command.</p>
<div class="highlight"><pre><span></span>man command-name
</pre></div>

<p>Opens a reference manual with all flags, syntax, options, details etc., Press <strong>q</strong> to quit the manual.</p>
<h2 id="banner-command">Banner command</h2>
<p>Creates a banner</p>
<div class="highlight"><pre><span></span>arun@hpdv6:~$ banner text <span class="c1"># can use &quot;&quot; for using a single string</span>

  <span class="c1">#####  ######  #    #   #####</span>
    <span class="c1">#    #        #  #      #</span>
    <span class="c1">#    #####     ##       #</span>
    <span class="c1">#    #         ##       #</span>
    <span class="c1">#    #        #  #      #</span>
    <span class="c1">#    ######  #    #     #</span>

arun@hpdv6:~$ 
</pre></div>

<p>Only 10 characters (including whitespaces) will be displayed per line.</p>
<h2 id="compress-command">Compress command</h2>
<p>Used to compress files.</p>
<div class="highlight"><pre><span></span>compress -v filename
<span class="c1"># output will be filename.Z</span>
</pre></div>

<p>To read the compressed file inside terminal, use <strong>zcat</strong></p>
<div class="highlight"><pre><span></span>zcat filename.Z
</pre></div>

<p>To uncompress the file, use <strong>uncompress</strong> command.</p>
<div class="highlight"><pre><span></span>uncompress filename.Z
</pre></div>

<h2 id="echo-command">echo command</h2>
<p>Used to print contents in the terminal. Echo automatically puts a newline character at the end.</p>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;Hello World!&quot;</span>
</pre></div>

<h2 id="running-shell-scripts">Running shell scripts</h2>
<ul>
<li>Create shell scripts with the extension *.sh</li>
<li>Write the code inside the shell script one after the other</li>
<li>Run them in the terminal using the command</li>
</ul>
<div class="highlight"><pre><span></span>sh filename.sh
bash filename.sh
</pre></div>

<h2 id="creating-variables">Creating Variables</h2>
<p>Variables are case sensitive. They can’t start with numbers. Only underscores are allowed. Variables can start with an underscore.</p>
<p><strong>Shell stores the values as strings by default! So, we need to specify the data type to the variables for mathematical computation.</strong></p>
<div class="highlight"><pre><span></span><span class="c1"># local variable - available only in the file</span>
<span class="nv">a</span><span class="o">=</span><span class="m">25</span>
<span class="c1"># global/environment variable - available as long as the terminal is active</span>
<span class="nb">export</span> <span class="nv">b</span><span class="o">=</span><span class="m">50</span>
</pre></div>

<p><strong>There should be no <em>space</em> between the variable, the equal sign and value</strong></p>
<h2 id="read-command">Read command</h2>
<p>Used to read variable data from the user.</p>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;Please enter a name:&quot;</span>
<span class="nb">read</span> my_name <span class="c1"># this is a variable to read the user data</span>
<span class="nb">echo</span> <span class="s2">&quot;Hello </span><span class="nv">$my_name</span><span class="s2">! How are you?&quot;</span>
<span class="c1"># To use the variable data, put a dollar infront of the variable.</span>
<span class="c1"># Also, the info is taken as a string in this context.</span>
</pre></div>

<h2 id="assigning-variables-and-values-in-the-terminal.">Assigning variables and values in the terminal.</h2>
<p>When you open the terminal, if you create an assignment expression like ** a = 25<strong>, or </strong> b = “hello”<strong>, then the variables are created with the values assigned to them. On typing </strong>echo $a ** or ** echo $b**, it is going to display the values. Variables can be re-assigned with new values.</p>
<h2 id="position-parameters.">Position Parameters.</h2>
<p>Position parameters are run-time data provided by the user while running the file.</p>
<div class="highlight"><pre><span></span><span class="c1"># program name : ssh5.sh</span>
mv <span class="nv">$1</span> <span class="nv">$2</span>
cat <span class="nv">$2</span>
</pre></div>

<p>This file is executed as follows.</p>
<div class="highlight"><pre><span></span>:~$ ssh5.sh filename1.txt filename2.txt
</pre></div>

<p>Here, <strong>filename1.txt</strong> is taken as the first position parameter, while <strong>filename2.txt</strong> is taken as the positional parameter 2. So, this file ** ssh5.sh**, in this line will rename filename1.txt as filename2.txt and shows the contents of filename2.txt in the terminal.</p>
<p>Using the <strong>set</strong> command, multiple positional parameters can be set!</p>
<div class="highlight"><pre><span></span>:~$ <span class="nb">set</span> Hello there everyone!
:~$ <span class="nb">echo</span> <span class="nv">$1</span>
Hello
:~$ <span class="nb">echo</span> <span class="nv">$2</span>
there
:~$ <span class="nb">echo</span> <span class="nv">$3</span>
everyone
:~$ <span class="nb">echo</span> <span class="nv">$*</span> <span class="c1"># Prints all the positional parameter values</span>
Hello there everyone!
:~$ <span class="nb">echo</span> <span class="nv">$#</span> <span class="c1"># Prints the number of positional parameter values</span>
<span class="m">3</span>
</pre></div>

<h2 id="reverse-quotesaccent-graves">Reverse quotes/Accent graves</h2>
<p>Used for writing/passing a command as an argument/positional parameter/data to another command. <strong>If you want the output of a command or a statement to be passed to some other command or variable, then use reverse quotes</strong></p>
<div class="highlight"><pre><span></span>:~$ <span class="nb">set</span> <span class="sb">`</span>cat filename<span class="sb">`</span>
</pre></div>

<p>In this example, because of the reverse quote, the contents of the filename are passed as data to the set command to create positional parameters.</p>
<p><strong>Reverse quotes are useful for creating subshells with output return</strong></p>
<h2 id="subshells">Subshells</h2>
<p>Subshell is like a shell within a shell. Used for executing statements and get their results passed to some other command or variable. Subshells inherit all the enivironment/global variables from the parent shell.</p>
<div class="highlight"><pre><span></span><span class="c1"># Creating a subshell and executing ls command inside it.</span>
<span class="nv">filename</span><span class="o">=(</span>ls -ltr<span class="o">)</span>

<span class="c1"># Creating a subshell and executing ls command inside it.</span>
<span class="c1"># Also, using the dollar sign, we extract the output from</span>
<span class="c1"># the subshell</span>
<span class="nv">filename</span><span class="o">=</span><span class="k">$(</span>ls -ltr<span class="k">)</span>

<span class="c1"># Same as above!</span>
<span class="nv">filename</span><span class="o">=</span><span class="sb">`</span>ls -ltr<span class="sb">`</span>
</pre></div>

<h2 id="arithmetic-operations">Arithmetic Operations</h2>
<p>The command <strong>expr</strong> is used for doing arithmetic calculations/operations using the values. Use <strong>echo</strong> keyword and reverse quote to print the results. <strong>expr works only for integers!</strong> Another way is the usage of square brackets and circular brackets.</p>
<div class="highlight"><pre><span></span><span class="nv">a</span><span class="o">=</span><span class="m">20</span> <span class="nv">b</span><span class="o">=</span><span class="m">30</span>  <span class="c1"># Creating two variables</span>
<span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$a</span> + <span class="nv">$b</span><span class="sb">`</span>    <span class="c1"># Addition</span>
<span class="nb">echo</span> $<span class="o">[</span> <span class="nv">$a</span> + <span class="nv">$b</span> <span class="o">]</span>      <span class="c1"># Addition</span>
<span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$a</span> - <span class="nv">$b</span><span class="sb">`</span>    <span class="c1"># Subtraction</span>
<span class="nb">echo</span> $<span class="o">[</span> <span class="nv">$a</span> - <span class="nv">$b</span> <span class="o">]</span>      <span class="c1"># Subtraction</span>
<span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$a</span> <span class="se">\*</span> <span class="nv">$b</span><span class="sb">`</span>   <span class="c1"># Multiplication</span>
<span class="nb">echo</span> $<span class="o">[</span> <span class="nv">$a</span> <span class="se">\*</span> <span class="nv">$b</span> <span class="o">]</span>     <span class="c1"># Multiplication</span>
<span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$a</span> / <span class="nv">$b</span><span class="sb">`</span>    <span class="c1"># Division</span>
<span class="nb">echo</span> $<span class="o">[</span> <span class="nv">$a</span> / <span class="nv">$b</span> <span class="o">]</span>      <span class="c1"># Division</span>
<span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$a</span> % <span class="nv">$b</span><span class="sb">`</span>    <span class="c1"># Modulus</span>
<span class="nb">echo</span> $<span class="o">[</span> <span class="nv">$a</span> % <span class="nv">$b</span> <span class="o">]</span>      <span class="c1"># Modulus</span>
<span class="nb">echo</span> <span class="sb">`</span>expr <span class="nv">$a</span> <span class="se">\*</span> <span class="se">\(</span> <span class="nv">$b</span> + <span class="nv">$c</span> <span class="se">\)</span> / <span class="nv">$d</span><span class="sb">`</span>    <span class="c1"># A mathematical expression.</span>
<span class="nb">echo</span> $<span class="o">[</span> <span class="nv">$a</span> * <span class="k">$((</span> <span class="nv">$b</span> <span class="o">+</span> <span class="nv">$c</span> <span class="k">))</span> / <span class="nv">$d</span> <span class="o">]</span>  <span class="c1"># Alternate safe way 1</span>
<span class="nb">echo</span> $<span class="o">[</span> <span class="nv">$a</span> * <span class="o">((</span> <span class="nv">$b</span> + <span class="nv">$c</span> <span class="o">))</span> / <span class="nv">$d</span> <span class="o">]</span>   <span class="c1"># Alternate safe way 2</span>

<span class="c1"># Completely different approach</span>
<span class="nb">let</span> <span class="s2">&quot;c=</span><span class="nv">$a</span><span class="s2">+</span><span class="nv">$b</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="nv">$c</span>
<span class="o">((</span><span class="nv">c</span><span class="o">=</span><span class="nv">$a</span>+<span class="nv">$b</span><span class="o">))</span>
<span class="nb">echo</span> <span class="nv">$c</span>
</pre></div>

<p>Parenthesis and asterix are reserved symbols. So, you need to escape them out using escape sequences!. But, when using square brackets, you do not have to escape them out! When circular brackets are used, then the comparison operators are escaped out!</p>
<p><strong>While evaluating with $[] or ((…)), space is not a problem around brackets</strong></p>
<p>Operator precedence : Parenthesis, Division, Multiplication, Modulus operation, Addition, Subtraction.</p>
<p>For working with floating point numbers/operations, we need to use the <strong>bc</strong> command/program. Use the pipe symbol, <strong>|</strong> to re-direct the output of the mathematical expression to the command/program <strong>bc</strong>.</p>
<div class="highlight"><pre><span></span><span class="nv">a</span><span class="o">=</span><span class="m">20</span>.5 <span class="nv">b</span><span class="o">=</span><span class="m">30</span>.4  <span class="c1"># Creating two variables</span>
<span class="nv">c</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$a</span> + <span class="nv">$b</span>  <span class="p">|</span> bc<span class="sb">`</span>   <span class="c1"># Addition</span>
<span class="nv">d</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$a</span> - <span class="nv">$b</span>  <span class="p">|</span> bc<span class="sb">`</span>  <span class="c1"># Subtraction</span>
<span class="nv">e</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$a</span> <span class="se">\*</span> <span class="nv">$b</span> <span class="p">|</span> bc<span class="sb">`</span>  <span class="c1"># Multiplication</span>
<span class="nv">f</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$a</span> / <span class="nv">$b</span>  <span class="p">|</span> bc<span class="sb">`</span>  <span class="c1"># Division</span>
</pre></div>

<h2 id="escape-sequence">Escape Sequence</h2>
<div class ="highlight"><pre>\n - newline
\r - carriage return - overwrites the previous line.
\t - tab character
\b - backspace - clears one previous printed character
\c - continue - cancels newline escape sequence
\033[1m ....... \033[0m- To make the printed text bold
\033[7m ....... \033[0m- To make the printed text have reverse fg and bg colours.</pre></div>
<h2 id="tput-command">tput command</h2>
<p><strong>tput</strong> is used for doing a wide variety of operations.</p>
<div class="highlight"><pre><span></span>tput clear <span class="c1"># clear terminal</span>
tput lines <span class="c1"># prints the number of rows/lines in terminal</span>
tput cols <span class="c1"># prints the number of columns in terminal</span>
tput cup <span class="m">15</span> <span class="m">20</span> <span class="c1"># Move the cursor to line 15, column 20</span>
tput bold <span class="c1"># prints the next lines bold</span>
<span class="c1"># use echo \033[0m ..... to deactivate the bold effect from tput.</span>
</pre></div>

<h2 id="exit-status">Exit status</h2>
<p>Whenever a command is executed, a value is associated. If the command is successful, then the value is 0, else it is 1. These values are exit status values. To see if the command is successful check the status variable <strong>?</strong>. If an illegal condition is given, then the exit status is 2.</p>
<div class="highlight"><pre><span></span>arun@hpdv6:~$ mkdir sample
arun@hpdv6:~$ <span class="nb">echo</span> <span class="nv">$?</span>
<span class="m">0</span>
arun@hpdv6:~$ mkdir sample
mkdir: cannot create directory ‘sample’: File exists
arun@hpdv6:~$ <span class="nb">echo</span> <span class="nv">$?</span>
<span class="m">1</span>
</pre></div>

<h2 id="if-else-statements">If else statements</h2>
<div class="highlight"><pre><span></span><span class="k">if</span> &lt;condition1/command1&gt; 
<span class="k">then</span>
    statement_set1
<span class="k">else</span>
    statements_set_final
<span class="k">fi</span>
</pre></div>

<p>Example</p>
<div class="highlight"><pre><span></span><span class="c1"># space after the starting square bracket and </span>
<span class="c1"># before the  closing square bracket</span>
<span class="c1"># is necessary</span>
<span class="c1"># -gt - greater than</span>
<span class="c1"># -lt - less than</span>
<span class="c1"># -ge - greater than or equal to</span>
<span class="c1"># -le - less than or equal to</span>
<span class="c1"># -eq - equals</span>
<span class="c1"># -ne - not equals</span>
<span class="c1"># then keyword has to be in the next line</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$num</span> -lt <span class="m">10</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number less than 10&quot;</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$num</span> -gt <span class="m">20</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number greater than 10&quot;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number between 10 and 20&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$num</span> -lt <span class="m">10</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number less than 10&quot;</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$num</span> -gt <span class="m">20</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number greater than 10&quot;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number between 10 and 20&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> $<span class="o">[</span> <span class="nv">$num1</span> + <span class="nv">$num2</span> <span class="o">]</span> -lt <span class="m">10</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number less than 10&quot;</span>
<span class="k">elif</span> <span class="o">((</span> $<span class="o">[</span> <span class="nv">$num1</span> + <span class="nv">$num2</span> <span class="o">]</span> &gt; <span class="m">20</span> <span class="o">))</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number greater than 10&quot;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;Number between 10 and 20&quot;</span>
<span class="k">fi</span>
</pre></div>

<p>Use the keyword <strong>exit</strong> to terminate programs. Use <strong>exit</strong> to terminate any program anywhere abruptly. Use <strong>exit 0</strong> to indicate successful termination to get a <strong>0</strong> exit status.</p>
<p>Use the keyword <strong>break</strong> to terminate loops.</p>
<p>Use the keyword <strong>continue</strong> to skip the current loop.</p>
<h2 id="meta-characters">Meta characters</h2>
<p>Semi-colon <strong>;</strong> is used for displaying multiple commands in a single line.</p>
<div class="highlight"><pre><span></span>ls <span class="p">;</span> cal <span class="p">;</span> banner <span class="s2">&quot;hello&quot;</span>
</pre></div>

<p>Avoiding if else in some cases. Here, if the word was found in the file, then the lines would be copied to a new file. And if the entire process is successful, it will print the <strong>echo</strong> statement. For that, use <strong>&amp;&amp;</strong>. If the first statement fails, then the <strong>echo</strong> statement does not work. If the second command has to work irrespective of the outcome of the first statement, use <strong>||</strong> operator.</p>
<div class="highlight"><pre><span></span>grep -i word filename &gt; patterns <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;The task was completed&quot;</span>
grep -i word filename &gt; patterns <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;The task may be completed&quot;</span>
</pre></div>

<p><strong>&amp;&amp;</strong> and <strong>||</strong> are logical <strong>and</strong> and logical <strong>or</strong> operators for multiple expressions. <strong><em>They can be used with if else constructs</em></strong></p>
<h2 id="file-types">File types</h2>
<p>There are a few types of files</p>
<ul>
<li>Character special files - normal character files</li>
<li>Block special files - have binary code - eg: images, videos, special files</li>
<li>Directory special files - folders</li>
<li>Empty files - zero byte file</li>
</ul>
<p>Program to check if a specified file exists or not</p>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot; Enter a file name:\c&quot;</span>
<span class="nb">read</span> fname
<span class="k">if</span> <span class="o">[</span> -f <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the file exists</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This file exists&quot;</span>
<span class="k">elif</span> <span class="o">[</span> -d <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the name is a directory name</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This is a directory&quot;</span>
<span class="k">elif</span> <span class="o">[</span> -c <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the name is a character special file</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This is a character file&quot;</span>
<span class="k">elif</span> <span class="o">[</span> -b <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the name is a block special file</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This is a block file&quot;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;This is something else&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -r <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the file has read permission</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This file has read permission&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -w <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the file has write permission</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This file has write permission&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -x <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the file has execute permission</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This file has execute permission&quot;</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -s <span class="nv">$fname</span> <span class="o">]</span> <span class="c1"># if the file has non-zero size</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This file has non-zero size&quot;</span>
<span class="k">fi</span>
</pre></div>

<h2 id="string-comparisons">String comparisons</h2>
<div class="highlight"><pre><span></span><span class="nv">str1</span><span class="o">=</span><span class="s2">&quot;Hey there!&quot;</span>
<span class="nv">str2</span><span class="o">=</span><span class="s2">&quot;What is up?&quot;</span>
<span class="nv">str3</span><span class="o">=</span>
<span class="c1">#str4=&quot;&quot;</span>
<span class="c1"># str3 and str4 are null variables</span>

<span class="c1"># If condition is true, then exit staus is 0, if false, then exit status is 1</span>
<span class="c1"># compare the two strings for equality as a command and get an exit status</span>
<span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$str1</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="nv">$str2</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="nb">echo</span> <span class="nv">$?</span>

<span class="c1"># compare the two strings for inequality as a command and get an exit status</span>
<span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$str1</span><span class="s2">&quot;</span> !<span class="o">=</span> <span class="s2">&quot;</span><span class="nv">$str2</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="nb">echo</span> <span class="nv">$?</span>

<span class="c1"># check the length of a string is non-zero</span>
<span class="o">[</span> -n <span class="s2">&quot;</span><span class="nv">$str1</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="nb">echo</span> <span class="nv">$?</span>

<span class="c1"># check the length of a string is zero</span>
<span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$str3</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>

<h2 id="logical-operators">Logical Operators</h2>
<div class="highlight"><pre><span></span>! not operator
-a and operator
-o or operator

<span class="c1"># Checks if a number is between 50 and 100</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$num</span> -le <span class="m">100</span> -a <span class="nv">$num</span> -ge <span class="m">50</span> <span class="o">]</span>
</pre></div>

<h2 id="user-inputs">User inputs</h2>
<p>The user input has one additional character than what is entered by the user, namely the return key.</p>
<p><strong>So, if the user enters just <em>one</em> character/symbol, then the return key gets attached to it like an EOL character</strong></p>
<h2 id="a-counting-program">A counting program</h2>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;Enter a file name:\c&quot;</span>
<span class="nb">read</span> var
<span class="c1"># Prints Variable var. The result is pipelined to wc command which</span>
<span class="c1"># counts the number of characters and -eq (equality) operator checks</span>
<span class="c1"># if it is equal to 2</span>
<span class="k">if</span> <span class="o">[</span> <span class="sb">`</span><span class="nb">echo</span> <span class="nv">$var</span> <span class="p">|</span> wc -c<span class="sb">`</span> -eq <span class="m">2</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered a character&quot;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered something else&quot;</span>
<span class="k">fi</span>
</pre></div>

<h2 id="case-statement">Case statement</h2>
<p>This program gets a variable and checks its type</p>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;Enter a variable:\c&quot;</span>
<span class="nb">read</span> var
<span class="k">case</span> <span class="nv">$var</span> in
<span class="o">[</span>a-z<span class="o">])</span> <span class="c1"># Checks if the character lies between a and z</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered a lowercase character&quot;</span><span class="p">;;</span> <span class="c1"># End of a case</span>
<span class="o">[</span>A-Z<span class="o">])</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered an uppercase character&quot;</span>
    <span class="p">;;</span>
<span class="o">[</span><span class="m">0</span>-9<span class="o">])</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered a digit&quot;</span>
    <span class="p">;;</span>
?<span class="o">)</span>     <span class="c1"># Substitution for one character</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered a special symbol&quot;</span>
    <span class="p">;;</span>
*<span class="o">)</span>     <span class="c1"># Substitution for more than one character</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered multiple characters&quot;</span>
    <span class="p">;;</span>
<span class="k">esac</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;Enter a word:\c&quot;</span>
<span class="nb">read</span> word
<span class="k">case</span> <span class="nv">$word</span> in
<span class="o">[</span>aeiou<span class="o">]</span>* <span class="p">|</span> <span class="o">[</span>AEIOU<span class="o">]</span>* <span class="o">)</span> <span class="c1"># Checks if the first letter of the word is a Vowel</span>
    <span class="nb">echo</span> <span class="s2">&quot;Word starts with a vowel&quot;</span>
    <span class="p">;;</span>
<span class="o">[</span><span class="m">0</span>-9<span class="o">]</span>*<span class="o">)</span> <span class="c1"># Checks if the first letter of the word is a number</span>
    <span class="nb">echo</span> <span class="s2">&quot;Word starts with a number&quot;</span>
    <span class="p">;;</span>
*<span class="o">[</span><span class="m">0</span>-9<span class="o">])</span> <span class="c1"># Checks if the last letter of the word is a number</span>
    <span class="nb">echo</span> <span class="s2">&quot;Word ends with a number&quot;</span>
    <span class="p">;;</span>
???<span class="o">)</span>     <span class="c1"># Checks if it is a three character word</span>
    <span class="nb">echo</span> <span class="s2">&quot;You entered a three character&quot;</span>
    <span class="p">;;</span>
*<span class="o">)</span>     <span class="c1"># Some other condition</span>
    <span class="nb">echo</span> <span class="s2">&quot;Some other n/a word&quot;</span>
    <span class="p">;;</span>
<span class="k">esac</span>
</pre></div>

<h2 id="while-loop">While loop</h2>
<p>While loop executes instruction till the condition becomes false.</p>
<div class="highlight"><pre><span></span><span class="nv">count</span><span class="o">=</span><span class="m">1</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$count</span> -le <span class="m">10</span><span class="o">]</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$count</span>
    <span class="nv">count</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$count</span> + <span class="m">1</span><span class="sb">`</span>
<span class="k">done</span>
</pre></div>

<h2 id="until-loop">Until loop</h2>
<p>Untill loop executes instruction till the condition becomes true.</p>
<div class="highlight"><pre><span></span><span class="nv">count</span><span class="o">=</span><span class="m">1</span>
<span class="k">until</span> <span class="o">[</span> <span class="nv">$count</span> -ge <span class="m">10</span><span class="o">]</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$count</span>
    <span class="nv">count</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$count</span> + <span class="m">1</span><span class="sb">`</span>
<span class="k">done</span>
</pre></div>

<h2 id="for-loop">For loop</h2>
<p>This program scans the folders/files in the present working directory and display the name of the folders only.</p>
<div class="highlight"><pre><span></span><span class="c1"># item takes one value in each iteration</span>
<span class="k">for</span> item in *
<span class="k">do</span>
    <span class="k">if</span> <span class="o">[</span> -d <span class="nv">$item</span><span class="o">]</span>
    <span class="k">then</span>
        <span class="nb">echo</span> <span class="nv">$item</span>
    <span class="k">fi</span>
<span class="k">done</span>
</pre></div>

<h2 id="command-line-arguments">Command line arguments</h2>
<p><code>@</code> is useful for extracting command line arguments.</p>
<div class="highlight"><pre><span></span><span class="c1"># filename is args1.sh</span>
<span class="k">for</span> args in <span class="nv">$@</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$args</span>
<span class="k">done</span>
</pre></div>

<div class ="highlight"><pre>arun@hpdv6:~$ bash args1.sh hello there i am arun
hello
there
i
am
arun</pre></div>
<h2 id="grep-command">grep command</h2>
<p>grep = globally search a regular expression and print.</p>
<p>Used to search for patterns in text files.</p>
<div class="highlight"><pre><span></span><span class="c1"># searches for the word &quot;money&quot; in the file &quot;filename&quot;</span>
grep money filename

<span class="c1"># searches for the word &quot;money&quot; in the file &quot;filename&quot;</span>
<span class="c1"># -i means case insensitive</span>
grep -i money filename

<span class="c1"># searches for the word &quot;money&quot; in the file &quot;filename&quot;</span>
<span class="c1"># -i means case insensitive</span>
<span class="c1"># -n means line numbers</span>
grep -i -n money filename

<span class="c1"># searches for the word &quot;money&quot; in the file &quot;filename&quot;</span>
<span class="c1"># -i means case insensitive</span>
<span class="c1"># -n means line numbers</span>
<span class="c1"># -c prints the number of lines having the pattern</span>
grep -i -n -c money filename

<span class="c1"># searches for the word &quot;money&quot; in the file &quot;filename&quot;</span>
<span class="c1"># -i means case insensitive</span>
<span class="c1"># -n means line numbers</span>
<span class="c1"># -c prints the number of lines having the pattern</span>
<span class="c1"># -v prints the number of lines not having the pattern if -c is present</span>
grep -i -n -c -v money filename

<span class="c1"># searches for the word &quot;money&quot; in the file &quot;filename&quot;</span>
<span class="c1"># -i means case insensitive</span>
<span class="c1"># -n means line numbers</span>
<span class="c1"># -v prints the lines not having the pattern</span>
grep -i -n -v money filename
</pre></div>

<h2 id="passwd-file">passwd file</h2>
<p>This file is present in <strong>/etc/</strong> folder. It has many useful and vital info about the users and account details. You have read permissions, but you cannot modify it. <strong>DO NOT MESS WITH THIS FILE</strong>. The system uses this file for many operations. If tampered or deleted, then depending on the level of tampering, the system programs may stop working or the OS might not boot up.</p>
<p>It has user information and information about system programs and other special programs that have vital functions. This is an example of how a passwd file looks like.</p>
<div class="highlight"><pre><span></span>arun@hpdv6:~$ cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
gnats:x:41:41:Gnats Bug-Reporting System <span class="o">(</span>admin<span class="o">)</span>:/var/lib/gnats:/usr/sbin/nologin
nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
systemd-timesync:x:100:102:systemd Time Synchronization,,,:/run/systemd:/bin/false
systemd-network:x:101:103:systemd Network Management,,,:/run/systemd/netif:/bin/false
systemd-resolve:x:102:104:systemd Resolver,,,:/run/systemd/resolve:/bin/false
systemd-bus-proxy:x:103:105:systemd Bus Proxy,,,:/run/systemd:/bin/false
syslog:x:104:108::/home/syslog:/bin/false
_apt:x:105:65534::/nonexistent:/bin/false
messagebus:x:106:110::/var/run/dbus:/bin/false
uuidd:x:107:111::/run/uuidd:/bin/false
lightdm:x:108:114:Light Display Manager:/var/lib/lightdm:/bin/false
whoopsie:x:109:116::/nonexistent:/bin/false
avahi-autoipd:x:110:119:Avahi autoip daemon,,,:/var/lib/avahi-autoipd:/bin/false
avahi:x:111:120:Avahi mDNS daemon,,,:/var/run/avahi-daemon:/bin/false
dnsmasq:x:112:65534:dnsmasq,,,:/var/lib/misc:/bin/false
colord:x:113:123:colord colour management daemon,,,:/var/lib/colord:/bin/false
speech-dispatcher:x:114:29:Speech Dispatcher,,,:/var/run/speech-dispatcher:/bin/false
hplip:x:115:7:HPLIP system user,,,:/var/run/hplip:/bin/false
kernoops:x:116:65534:Kernel Oops Tracking Daemon,,,:/:/bin/false
pulse:x:117:124:PulseAudio daemon,,,:/var/run/pulse:/bin/false
rtkit:x:118:126:RealtimeKit,,,:/proc:/bin/false
saned:x:119:127::/var/lib/saned:/bin/false
usbmux:x:120:46:usbmux daemon,,,:/var/lib/usbmux:/bin/false
arun:x:1000:1000:Arun,,,:/home/arun:/bin/bash
sddm:x:122:130:Simple Desktop Display Manager:/var/lib/sddm:/bin/false
nvidia-persistenced:x:121:129:NVIDIA Persistence Daemon,,,:/:/sbin/nologin
</pre></div>

<p>Taking one entry and dissecting the 7 fields (separated by :),</p>
<div class="highlight"><pre><span></span>root:x:0:0:root:/root:/bin/bash
</pre></div>

<p>First field is the user name or the program name.</p>
<p>Second field is the password. If there is a <strong>x</strong>, then it means that the information is encrypted. Passwords are stored in the <strong>shadow</strong> file in the same folder and we do not have permissions to open/read that file.</p>
<p>Third field is the User ID or UID. For root user, it is 0. UID 1-99 are pre-defined/reserved for system accounts that were created at the time of installation of OS. Beyond 99, the UIDs are defined for system accounts created afterwards.</p>
<p>Fourth field is the group ID. Name ID notations as above.</p>
<p>Fifth field is the name of the program/pc/user name etc., Also known as comment field.</p>
<p>sixth field is the home folder or the folder where the program is present</p>
<p>Seventh field is the default binary file (or shell) for doing stuff with the program/user</p>
<h2 id="internal-file-separator">Internal file separator</h2>
<p>If there are multiple parameters in a command, the internal file separator is used by the shell to differentiate the parameters. Usually the IFS is <strong>space</strong> and <strong>return</strong>. IFS can be modified manually. If modified, it presists till the terminal is active.</p>
<div class="highlight"><pre><span></span><span class="nv">IFS</span><span class="o">=</span>: <span class="c1"># modifies the IFS with :</span>
</pre></div>

<h2 id="read-and-display-info-from-passwd-file">Read and display info from passwd file</h2>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;Enter user name:\c&quot;</span>
<span class="nb">read</span> logname
<span class="nv">IFS</span><span class="o">=</span>:
<span class="nv">line</span><span class="o">=</span><span class="sb">`</span>grep <span class="nv">$logname</span> /etc/passwd<span class="sb">`</span>
<span class="nb">set</span> <span class="nv">$line</span>
<span class="nb">echo</span> <span class="s2">&quot;Username = </span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Password = </span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;User ID = </span><span class="nv">$3</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Group ID = </span><span class="nv">$4</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Comment = </span><span class="nv">$5</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Home folder = </span><span class="nv">$6</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Shell folder = </span><span class="nv">$7</span><span class="s2">&quot;</span>
</pre></div>

<h2 id="read-from-a-file-use-file-as-input">Read from a file / Use file as input</h2>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;enter a file name:\c&quot;</span>
<span class="nb">read</span> filename

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$filename</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="c1"># checks if the file is empty</span>
<span class="k">then</span>
    <span class="nb">exit</span>
<span class="k">fi</span>

<span class="c1"># Setting up a variable/filename so that the keyboard input stream</span>
<span class="c1"># is stored separately</span>

<span class="nv">terminal</span><span class="o">=</span><span class="sb">`</span>tty<span class="sb">`</span>

<span class="c1"># Executing the filename - getting the inputs from the file</span>
<span class="nb">exec</span> &lt; <span class="nv">$filename</span>

<span class="nv">count</span><span class="o">=</span><span class="m">1</span>

<span class="c1"># read lines one by one and print them</span>
<span class="k">while</span> <span class="nb">read</span> line
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$count</span>.<span class="nv">$line</span>
    <span class="nv">count</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$count</span> + <span class="m">1</span><span class="sb">`</span>
<span class="k">done</span>

<span class="c1"># Return the input stream to the keyboard</span>

<span class="nb">exec</span> &lt; <span class="nv">$terminal</span>
</pre></div>

<h2 id="sleep-command">Sleep command</h2>
<p>Used to produce time delay in seconds.</p>
<div class="highlight"><pre><span></span>sleep <span class="m">5</span> <span class="c1"># 5 second delay</span>
</pre></div>

<h2 id="program-to-count-the-number-of-words-and-lines-in-a-file">Program to count the number of words and lines in a file</h2>
<div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;Enter the filename:\c&quot;</span>
<span class="nb">read</span> fname

<span class="nv">terminal</span><span class="o">=</span><span class="sb">`</span>tty<span class="sb">`</span>

<span class="nb">exec</span> &lt; <span class="nv">$fname</span>

<span class="nv">nol</span><span class="o">=</span><span class="m">0</span>
<span class="nv">now</span><span class="o">=</span><span class="m">0</span>

<span class="k">while</span> <span class="nb">read</span> line
<span class="k">do</span>
    <span class="nv">nol</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$nol</span> + <span class="m">1</span><span class="sb">`</span>
    <span class="nb">set</span> <span class="nv">$line</span>
    <span class="nv">now</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$now</span> + <span class="nv">$#</span><span class="sb">`</span>+
<span class="k">done</span>

<span class="nb">echo</span> <span class="s2">&quot;Number of lines:</span><span class="nv">$nol</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Number of words:</span><span class="nv">$now</span><span class="s2">&quot;</span>

<span class="nb">exec</span> &lt; <span class="nv">$terminal</span>
</pre></div>

<h2 id="device-null">Device null</h2>
<p>If a command returns a lot of output and the output has to be suppressed without losing or modifying the exit status, then device null is useful. The output of the command can be redirected to this file. This file will take the output and removes it and helps the command execute successfully.</p>
<div class="highlight"><pre><span></span>who <span class="p">|</span> grep <span class="s2">&quot;</span><span class="nv">$logname</span><span class="s2">&quot;</span> &gt; /dev/null
<span class="c1"># the output of command who is pipelined to grep.</span>
<span class="c1"># the output of grep is sent to the null file.</span>
<span class="c1"># the output of grep file gets deleted by the null file and</span>
<span class="c1"># grep terminates safely without any error.</span>
</pre></div>

<h2 id="log-in-another-user">Log in another user</h2>
<p>If there are multiple users in the system, then one user can login through another using the login command.</p>
<div class="highlight"><pre><span></span>sudo login
<span class="o">[</span>sudo<span class="o">]</span> password <span class="k">for</span> mainuser
&lt;OS&gt; login: newuser_name
password: password_newuser
</pre></div>

<p>For the user to logout, use the keyword <strong>logout/exit</strong>.</p>
<h2 id="send-receive-messages-to-users">Send / Receive messages to user(s)</h2>
<p>Users can send/receive messages via terminal.</p>
<p>To enable users sending/receiving messages, use the keyword <strong>mesg</strong>. To write a message to the user, use the <strong>write</strong> command.</p>
<div class="highlight"><pre><span></span>mesg y <span class="c1"># enable message</span>
mesg n <span class="c1"># disable message</span>

write user2
<span class="o">[</span>write contents<span class="o">]</span>
<span class="o">[</span>Terminate with Ctrl+D<span class="o">]</span>
</pre></div>

<p>On pressing <strong>Enter</strong> key, the information is sent to user2 and the message gets displayed on the terminal of user2 with a timestamp. When user1 types <strong>Ctrl+D</strong>, the message to user2 terminates with an <strong>EOF</strong>, indicating the end of message and user2 can press <strong>Ctrl+D</strong> to close the message.</p>
<p>Command <strong>finger</strong> is useful for displaying the users who have enabled/disabled messages. Those who have disabled the service have an asterix * on the <strong>Tty</strong>.</p>
<h2 id="functions">Functions</h2>
<p>One can create own commands using functions.</p>
<div class="highlight"><pre><span></span>function_name<span class="o">()</span>
<span class="o">{</span>
    <span class="c1"># commands</span>
<span class="o">}</span>
</pre></div>

<p>Create a file with all the functions you need. Make that file executable (using <strong>chmod</strong>) and run that file first. When successful, the functions can be called in the terminal or any other shell script afterwards. The functions are available as long as the terminal is open.</p>
<div class="highlight"><pre><span></span>chmod +x func_file.sh
. func_file.sh <span class="c1"># execute the file</span>
./func_file.sh <span class="c1"># execute the file, Alternate way</span>
</pre></div>

<p>To remove a particular function from the terminal in that instant, use <strong>unset</strong> command.</p>
<div class="highlight"><pre><span></span><span class="nb">unset</span> function_name
</pre></div>

<h2 id="running-multiple-shell-files">Running Multiple Shell Files</h2>
<p>Use the line <strong>bash filename.sh</strong> inside another shell file.</p>
