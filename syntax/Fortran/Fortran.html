<!DOCTYPE html>
<html lang="en">

    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fortran Programming | Fortran | Fluidic Colours</title>

    
	<link rel="stylesheet" href="../../assets/css/main.css" />
    <noscript><link rel="stylesheet" href="../../assets/css/noscript.css" /></noscript>

    <!-- PrismJS - use with red carpet-->
    <!-- <link rel="stylesheet" href="../../assets/css/prism.css"> -->

    <!-- p5.js local copy -->
    <!-- commenting them out as they are being rendered externally. -->
    <!-- <script type="text/javascript" src="../../assets/js/p5js/p5.min.js"></script>
    <script type="text/javascript" src="../../assets/js/p5js/addons/p5.dom.min.js"></script>
    <script type="text/javascript" src="../../assets/js/p5js/addons/p5.sound.min.js"></script> -->

    <!-- Sequence Diagram Files local copy -->
    <script type="text/javascript" src="../../assets/js/sequence_diagrams/webfont.js"></script>
    <script type="text/javascript" src="../../assets/js/sequence_diagrams/snap.svg-min.js"></script>
    <script type="text/javascript" src="../../assets/js/sequence_diagrams/underscore-min.js"></script>
    <script type="text/javascript" src="../../assets/js/sequence_diagrams/sequence-diagram-min.js"></script>

    

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.6/processing.min.js"></script> -->

    <!-- Code highlight using Highlighter JS - to be used with pandoc + no default pandoc highlights -->
    <!--link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/railscasts.min.css"-->
    <!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/atom-one-dark.min.css"> -->

    <!--
        For source code, go here: https://github.com/highlightjs/highlight.js
    -->

    <!-- Moment.js - This is used for time difference calculations and time displays. -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script>
        moment().format();
    </script>

    <!-- BokehJS-->
    <link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-1.3.0.min.css" type="text/css" />
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-1.3.0.min.js"></script>
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.3.0.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
    
    <!-- MathJax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
            TeX: {  equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"] }
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            fonts: ["TeX"],
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>

    </head>
    
<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
<header id="header" class="alt">
	
	
		<a href="./../../index.html" class="logo"><strong>Fluidic Colours</strong>  <span>by Arun</span></a>
	
	
	<nav>
		<a href="#menu">Menu</a>
	</nav>
</header>

<!-- Menu -->
<nav id="menu">
	<ul class="links">
		
		<li><a href="./../../index.html">Home</a></li>
		<li><a href="./../../blogs.html">Blogs</a></li>
		<li><a href="./../../syntax.html">Coding and Software Notes</a></li>
		<li><a href="./../../science.html">Science Notes</a></li>
		<li><a href="./../../maths.html">Mathematics Notes</a></li>
		<li><a href="./../../apps.html">Useful Apps</a></li>
		<li><a href="./../../faq.html">FAQs</a></li>
		
	</ul>
</nav>
        
        <section>
            <div class="inner align-justify">
                <h1 id="fortran-programming">Fortran Programming</h1>
<p><strong><em>Updated till Fortran Programming Tutorial (Revised) : 017</em></strong></p>
<h2 id="introduction">Introduction</h2>
<p>Fortran stands for FORmula TRANslation.</p>
<p>It is been available from 1950’s</p>
<p>Prior to Fortran, machine level or assembly level languages were used for coding.</p>
<p>This was a hectic job and in 1950’s, John Backus of IBM gave the idea of “Speed Coding”, wherein you have a simple programming language, where the methods are simple and easy to understand. The lines of code are very easy to interpret and follow. And at the back, you have subroutines to convert the statements into equivalent machine level language and execute it.</p>
<p>And thus came Fortran, the first ever proper compiled language ever.</p>
<p>Versions are as follows,</p>
<h3 id="fortran-1">Fortran 1</h3>
<p>This is the first proper development in Fortran. It was quite difficult, but much better off than assembly level codes.</p>
<h2 id="fortran-2-and-3">Fortran 2 and 3</h2>
<p>These were developed version of Fortran. A lot of companies and universities started to use them and because of which, multiple versions and different syntactics came into existence. </p>
<h3 id="fortran-66-or-fortran-4">Fortran 66 or Fortran 4</h3>
<p>This was the first proper standardized version of Fortran made in 1966, that made everything move much easier. The codes became more easy to follow and work with. This eradicated the existence of multiple versions and syntactics.</p>
<h3 id="fortran-77">Fortran 77</h3>
<p>This is the most widely used and common standard made in 1977. It had a very large number of changes and improvements made into it. It is being used till date. This is the first in the series of the most easy to follow codes in Fortran ever. It was nearly a full fledged language. The program has a fixed format, wherein, each line cannot be more than 72 columns long and if they have to be, they have to be continues in multiple lines, executable statements mush start from a certain column number, labels from column 1 to 6 and so on.. This holds good for other statements as well. This was rather, an imitation of the IBM punch card designs used for programming at that time. A program will have 100s or 1000s of these cards, each card for each line of the program. Each card has instructions built into it by making holes/punches in specific places to denote the binary representation of each character, as per ASCII notations. Punches indicate 1 and the rest indicate zeros. Before that, tapes were used for programming and those were even more frustrating than punch cards.</p>
<p>The extension is .f77 or .f</p>
<h3 id="fortran-90">Fortran 90</h3>
<p>This is a full fledge upgrade of F77, released in 1990 with more features and more freedom in-terms of syntax and operations. Have a lot of difference in syntax when compared to F77. It has free format, meaning, you do not have to stick to the ground rules of F77 for writing codes. Each line can be more that 72 characters long and will not be ignored as in F77 if the 72 count crosses.</p>
<p>The extension is .f90</p>
<h3 id="fortran-95-fortran-2003-fortran-2008-fortran-2015">Fortran 95 Fortran 2003 Fortran 2008 Fortran 2015</h3>
<p>The above three are marginal additions to F90 added in 1995, 2003, 2008 etc., They are not that prominent. F95 has minor changes. F03 and F08 have more features, but those have not been completely incorporated into the compilers yet. F15 is under construction and will be released by 2015/2016.</p>
<p>The extensions are .f95, .f03, .f08</p>
<p>Apparently, the older versions are the fastest and subsequent releases are slower and slower. This is a compromise for making more features and ease of programming for the users. The more higher level the instructions become, the harder it is for the compiler to optimize the memory for performing it faster.</p>
<p>Fortran was so heavily used in Industry and scientific community, that it created a software inertia. When new programming languages were created, instead of getting wiped out of existence, Fortran remained strong and firm and still being used. Surprisingly, fortran is still active and becoming more and more modern.</p>
<p>Fortran can be said as the pioneer example of modern programming languages. It gave inspiration for the birth of new programming languages.</p>
<hr />
<h2 id="data-sources">Data Sources</h2>
<h3 id="books">Books:</h3>
<ul>
<li>Any Fortran book of convenience</li>
<li>tutorialspoint.com notes on Fortran</li>
</ul>
<h3 id="video-lectures">Video Lectures:</h3>
<ul>
<li>Youtube Lectures by Reimber</li>
<li>Youtube Lectures by hexafoil</li>
<li>Coursera - HPC course by Prof. Randall J LeVeque, University of Washington</li>
<li>Youtube Lectures by Self</li>
<li>Fortran.com, The fortran company.</li>
<li>fortrantutorial.com notes</li>
</ul>
<p>A lot of information has been covered in the Fortran (Basic and Advanced) Tutorials that are not in the notes. Have a look.</p>
<hr />
<h2 id="requirements">Requirements</h2>
<p>The software requirements are</p>
<ul>
<li>Compilers</li>
<li>Editors</li>
</ul>
<p>Compilers or the basic code for fortran, are available in several formats:</p>
<ul>
<li><p>GNU gfortran is ideal and most suited. This is highly recommended for general purpose usage. It compiles F77, F90 and F95.</p></li>
<li><p>Intel ifortran is also available, but may be commercial. Not recommended for normal use, primarily because of cost issues, but can be used for Super Computing facilities.</p></li>
<li><p>Several other compilers exist, with each one having their own advantages and facilities.</p></li>
</ul>
<p><strong>For Linux/Unix</strong> : They come pre-built with a GNU compiler (possibly) and regular periodic checks/updates will do. If not available, a command prompt execution for installation will take care of it.</p>
<p><strong>For Windows</strong>: This is a bit complex. By default, windows do not have the compilers built into it. To incorporate them, there are, in contrast to the complexity, many ways:</p>
<ul>
<li><p><strong>Cygwin</strong>: This is a collection of software with a bash terminal. To get the compiler, invoke a cygwin installer and install gnu gcc compilers. Cygwin provides a vast variety of software, so it is sufficient to install the essential ones.</p></li>
<li><p><strong>Mingw</strong>: This is similar to cygwin. It is a big bundle having GNU compilers for fortran, c and c++. Possibly with OpenMP modules.</p></li>
<li><p><strong>Equation solutions</strong> company in their website, Equation.com provides a small bundle of essential GNU compilers.</p></li>
<li><p><strong>Silver force FTN95</strong> is another option. Comes along with <strong>Plato IDE</strong></p></li>
</ul>
<p>  There are multiple sources.</p>
<p>  Editors:</p>
<ul>
<li><p><strong>Geany</strong> : Light weight, needs a compiler to be installed separately,</p></li>
<li><p><strong>Netbeans</strong> : Multi-purpose editor, needs C/C++ plugin installed and a compiler installed, either cygwin or mingw. Sometimes, the fortran plugin may not be available, so you have to install one, which is quite easy.</p></li>
<li><p><strong>Eclipse</strong>: Multi-purpose editor, thinking that it will be similar to netbeans. There are many versions of eclipse. The “parallel application developers” version is preferred. It has features to run C/C++, fortran and can implement OpenMP/MPI features. If other versions are used, then a Fortran plugin has to be installed.</p></li>
</ul>
<p><strong>Note</strong>: If Eclipse or Net beans is used in Windows, then you have to ensure the path of java is registered. Install a <strong>JDK</strong> package, copy the address of the bin folder, right click the computer icon, go to properties, go to advanced system settings&gt;environment variables, add a new user variable, set the variable to be “path” and the address to be the address you copied from the jdk folder. Save and quit. Open cmd and type javac and enter. If you get a big bunch of usage instructions, then it is working. If it shows an error/not found message, the it has to be done properly. Check the link for step-by-step explanation. Also, follow the video for a full explanation. https://www.youtube.com/watch?v=GfCmiEbGtpE&amp;list=UUOF2qXeo1xhmxqt_25yEB9Q</p>
<p>  For Netbeans in ubuntu or any other linux versions, go to https://www.youtube.com/watch?v=OK6GSvpGZfk&amp;list=UUOF2qXeo1xhmxqt_25yEB9Q&amp;index=8</p>
<p>The above are free, cross platform and semi-dedicated editors. They can be used to edit and execute the programs easily.</p>
<p>If a normal editor is used such as gedit in ubuntu or notepad in windows, you need to execute them from command line prompt.</p>
<p><strong>Dedicated Editors</strong>: can be used to edit programs, compile and execute them. They come with the compilers in-built with them. So, they take care of the compiler issue.</p>
<p><strong>Code blocks</strong>: Has a lot of features, has both project and normal execution based modes. Recommended for starters and even advanced users. But not suitable for creating flag-based compilation.</p>
<p><strong>Plato</strong> : Specifically for Fortran</p>
<p>There are many more dedicated editors.</p>
<h2 id="installation">Installation</h2>
<h3 id="mac-and-linux---gfortran-installation">Mac and Linux - gfortran installation</h3>
<ul>
<li>Go to the terminal and type the line below for Debian/Ubuntu. (Instead of <code>apt-get</code> use the proper keyword based on the distro)</li>
</ul>
<div class="highlight"><pre><span></span>    sudo apt-get install gfortran
</pre></div>

<ul>
<li>Make sure that the internet is connected</li>
<li>Proceed as per instructions - easy and straight forward</li>
</ul>
<h3 id="windows-mac-and-linux---code-blocksgeany-installation">Windows, Mac and Linux - Code Blocks/geany installation</h3>
<p>To install code blocks(geany), go to the website, download the latest version of code blocks+mingw consolidated setup (geany setup) and proceed. It is very straight forward and simple.</p>
<h3 id="windows---gfortran-installation-via-cygwin">Windows - gfortran installation via cygwin</h3>
<p>Follow the instructions given in https://www.youtube.com/watch?v=GfCmiEbGtpE&amp;list=UUOF2qXeo1xhmxqt_25yEB9Q . This should work fine!</p>
<h2 id="caution">Caution!</h2>
<ul>
<li>Do not mix and match compilers! (Intel C + gnu fortran) Operations may not work!</li>
<li>Different compilers can give different answers for advanced problems - due to optimizations, flag usage, change of data types etc., So check the code and flags!</li>
<li>GNU Fortran is free, simple, opensource, almost all features, mostly sufficient for a large quantity of jobs.</li>
<li>Only has standard features. Good for beginners and learners. Makes learning advanced versions much easy!</li>
<li>Commercial compilers like Intel, PGI, Cray, NAG, HP are much advanced and have non-standard features. They are hardware manufacturers (a lot of them) and so, they take the advantages of the system architecture to make more efficient programs and flags.</li>
<li>Use Commercial compilers for heavy duty applications. They are both free and priced!</li>
<li>Commercial compilers have much advanced OpenMP and MPI implementations</li>
<li>Programs written keeping one compiler in mind, may cause warning or do not work in other compilers - due to flags and optimizations - Be cautious!</li>
</ul>
<h2 id="hello-world-program">Hello World Program!</h2>
<div class="highlight"><pre><span></span><span class="c">! This program is a hello world program</span>
<span class="c">! This is a comment. Start a comment with an ! mark</span>
<span class="c">! Intendation is optional, use it for enhanced readability!</span>

<span class="k">program </span><span class="n">hello</span>
<span class="c">! This is the program starting. program is a key word, followed by the program name</span>

    <span class="k">implicit none</span>
    <span class="c">! It has a meaning</span>
    
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;Hello World! My Name is Arun!&quot;</span>
    <span class="c">! This is the print statement. * means unformatted!</span>

<span class="c">! The line below is the program ending. end is sufficient, but for clarity, write end program prog_name</span>
<span class="k">end program </span><span class="n">hello</span>
</pre></div>

<h2 id="basic-concepts">Basic Concepts</h2>
<h3 id="implicit-none-and-datatypes">Implicit none and Datatypes</h3>
<div class="highlight"><pre><span></span>    <span class="k">implicit none</span>
    <span class="c">! Without it,</span>
    <span class="c">! Variables beginning with l, m, n .... are termed as integers by the compiler by default</span>
    <span class="c">! Variables beginning with a, b, c, x, y, z, ..... are real/float!</span>
    <span class="c">! If not used, then there can be data type troubles and limitation in variable names!</span>
    <span class="c">! implicit none tells the compiler &quot;Not to assume the data type of any variable implicitly! Let the user define the data type explicitly&quot;</span>
</pre></div>

<div class="highlight"><pre><span></span>    <span class="kt">integer</span> <span class="kd">::</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span>
    <span class="c">! Integers are positive and negative whole numbers</span>
    <span class="kt">integer </span><span class="n">i3</span><span class="p">,</span> <span class="n">i4</span>
    <span class="c">! This notation without :: is also fine! :: is used for separation - that is it!</span>
    <span class="kt">real</span> <span class="kd">::</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span>
    <span class="c">! Reals are positive and negative float numbers (numbers having decimal places)</span>
    <span class="n">double</span> <span class="kd">::</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span>
    <span class="c">! Reals having 8 bytes of memory! 15 digits precision</span>
    <span class="kt">complex</span> <span class="kd">::</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span>
    <span class="c">! Complex numbers. By default, both the real and imaginary parts are floats</span>
    <span class="kt">character</span> <span class="kd">::</span> <span class="n">ch1</span><span class="p">,</span> <span class="n">ch2</span>
    <span class="c">! Used for storing symbols</span>
    <span class="kt">logical</span> <span class="kd">::</span> <span class="n">l1</span><span class="p">,</span> <span class="n">l2</span>
    <span class="c">! Used for storing Boolean/Logical Values &quot;True&quot; or &quot;False&quot;</span>
</pre></div>

<h3 id="implicit-none">Implicit None</h3>
<p>This statement is given before variable declarations. The purpose is to tell the program that all the variables that will be used in the program will be user defined. It also says that no variable will be defined just like that.</p>
<p>If this statement is avoided, you can arbitrarily define variables anywhere in the code/script and the compiler will not cause a warning. Also, the data type of the variable is decided by the compiler based on some in-built rules. Also, these rules mention what type the memory location should be, should it be a constant or a variable?</p>
<p>If the statement is included, you have to define all the variables explicitly with a data type. You also have to mention whether they are constants or variables.</p>
<p>Why this Statement?</p>
<p>In the days of F77 and may be before, there was a general rule of thumb to differentiate variables and constants that is loosely associated with algebraic terms. It was a convention that all the variables starting with i,j,k,l,m,n are integers, and all other variables are 4-byte real values. Ironically, even today, some of these conventions are still being followed. If you want some other formats, you have to explicitly declare them.</p>
<p>With increase in complicated algorithms, this rule became pointless, because certain variables starting with i to n have to be floating point numbers, and other variables may have to be integers. So, because of this rule, a lot of complications arose in the future.</p>
<p>Instead of removing this convention, they added this command that overrides the convention. Thereby, the convention can be followed if required, avoided if needed.</p>
<h3 id="operations-and-operator-precedence">Operations and Operator Precedence</h3>
<p>Code for hero’s formulae : Area of a triangle</p>
<div class="highlight"><pre><span></span><span class="kt">real</span> <span class="kd">::</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">Area</span>

<span class="c">! + - * / Standard ASMD (Add, Subtract, Multiply, Divide)</span>
<span class="c">! ** exponent or power eg: 2^3 = 8 is written as 2**3</span>
<span class="c">! ^ not available!</span>
<span class="c">! mod(5,3) = 2. Returns the reminder of 5/3. Works for both</span>
<span class="c">! integers and real numbers</span>

<span class="c">! Operator precedence: </span>
<span class="c">! Operators have an order in which the operation occurs</span>
<span class="c">! Avoids multiple representation of an expression</span>
<span class="c">! Tells which operation to occur first, which next ...</span>
<span class="c">! PEMDAS = Parenthesis Exponent Multiplication Division Addition Subtraction</span>
<span class="c">! Please Excuse My Dear Aunt Sally (Acronym to remember the above)</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c">! 3x10^8 scientific notation is given by 3E8. decimals allowed.</span>
<span class="c">! e stands for a single precision number</span>
<span class="c">! 3d1, 6d-2 is also allowed. </span>
<span class="c">! These are another type of scientific notation.</span>
<span class="c">! d stands for double precision number</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">p</span><span class="o">/</span><span class="mi">2</span> <span class="c">! 0.5*p</span>

<span class="n">Area</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="n">c</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span>
<span class="c">! Parenthesis takes first preference! making s, s-a, s-b, s-c occurring separately.</span>
<span class="c">! Then, these results are multiplied and finally, the result is powered!</span>

<span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The perimeter of the Triangle is:&quot;</span><span class="p">,</span> <span class="n">Area</span>
<span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The area of the triangle is:&quot;</span><span class="p">,</span> <span class="n">p</span>
</pre></div>

<p>The output is:</p>
<div class ="highlight"><pre>The perimeter of the Triangle is: 12.00000
The area of the triangle is : 6.00000</pre></div>
<h3 id="type-casting-and-truncation">Type Casting and Truncation</h3>
<div class="highlight"><pre><span></span><span class="kt">integer</span> <span class="kd">::</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span>
<span class="kt">real</span> <span class="kd">::</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span>
<span class="c">! Proper integers and proper real numbers</span>

<span class="n">d</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">f</span> <span class="o">=</span> <span class="mf">6.7</span>
<span class="c">! Valid assignments based on data type</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">d</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">f</span>
<span class="c">! Not a proper assignment</span>

<span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;d = &quot;</span><span class="p">,</span><span class="n">d</span> <span class="p">,</span> <span class="s2">&quot;e = &quot;</span><span class="p">,</span> <span class="n">e</span>
<span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;f = &quot;</span><span class="p">,</span><span class="n">f</span> <span class="p">,</span> <span class="s2">&quot;g = &quot;</span><span class="p">,</span> <span class="n">g</span>
</pre></div>

<p>The output is:</p>
<div class ="highlight"><pre>d = 4 e = 6
f = 6.6999 g = 4.0000</pre></div>
<p>Note that ‘e’ value is truncated and you have extra zeros in ‘g’</p>
<p>Why the variation in output?</p>
<ul>
<li>d is an integer. When d’s value is assigned to g, integer data type is type casted to real. Integers can be represented by reals by adding trailing zeros. Hence, extra zeros come in. Also, real &gt; integer.</li>
<li>f is a real. When f’s value is assigned to e, float data type is type casted to integer. You cannot represent real numbers using integers because integers do not have decimal parts. Hence, the decimal part is truncated!</li>
</ul>
<h3 id="case-insensitivity">Case Insensitivity</h3>
<p>Variables, keywords etc., in fortran are case insensitive! for example</p>
<p>Code for hero’s formulae : Area of a triangle</p>
<div class="highlight"><pre><span></span><span class="c">! Note that throughout this code, capitalization is used</span>
<span class="c">! in a crazy manner!</span>

<span class="kt">Real</span> <span class="kd">::</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">Area</span>

<span class="n">A</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">P</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">p</span><span class="o">/</span><span class="mi">2</span> <span class="c">! 0.5*p</span>

<span class="n">AREA</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">s</span><span class="o">-</span><span class="n">c</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span>

<span class="k">Print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The perimeter of the Triangle is:&quot;</span><span class="p">,</span> <span class="n">AreA</span>
<span class="k">prInt</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The area of the triangle is:&quot;</span><span class="p">,</span> <span class="n">p</span>
</pre></div>

<p>The output is:</p>
<div class ="highlight"><pre>The perimeter of the Triangle is: 12.00000
The area of the triangle is : 6.00000</pre></div>
<p>The result is the same and not a problem!</p>
<p>Note that this can be an advantage/disadvantage based on the case! Use caution!</p>
<h3 id="explicit-type-casting-and-read-statement">Explicit type casting and Read Statement</h3>
<div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="kt">real</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="c">! Explicit type casting for real numbers</span>
<span class="n">e</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>  <span class="c">! Explicit type casting for integer numbers</span>
</pre></div>

<p>To get the data from the user, use <code>read</code> command!</p>
<div class="highlight"><pre><span></span><span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;Enter the sides of the triangle!&quot;</span>
<span class="k">read</span> <span class="o">*</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>
<span class="c">! * means unformatted input</span>
<span class="c">! While execution, after printing the message, the compiler waits.</span>
<span class="c">! Give data one by one and press enter.</span>
<span class="c">! Data has to be entered based on the data order mentioned in the read statement.</span>
<span class="c">! Sometimes, &#39;,&#39; and space between the data are also used for entering the data. Use carefully!</span>
<span class="c">! Use asterix properly for entering a common data to multiple consecutive variables!</span>
<span class="c">! eg: 3*5 = 5 is repeated thrice!</span>
</pre></div>

<h3 id="parameter-keyword-and-built-in-functions">Parameter keyword and Built-in Functions</h3>
<p>Use parameter keyword for making constants.</p>
<div class="highlight"><pre><span></span><span class="kt">real</span><span class="p">,</span> <span class="k">parameter</span> <span class="kd">::</span> <span class="n">pi</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="nb">atan</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="c">! This way, pi becomes a constant. </span>
<span class="c">! To get the value of pi, we are using the built in inverse tan function (arctan).</span>
<span class="kt">real</span><span class="p">,</span> <span class="k">parameter</span> <span class="kd">::</span> <span class="n">v</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="c">! v is also a constant</span>
<span class="kt">real</span><span class="p">,</span> <span class="k">parameter</span> <span class="kd">::</span> <span class="n">p</span> 
<span class="c">! This line will throw an error. While defining constants, one should enter the value as well</span>
</pre></div>

<p>Since <span class="math inline">\(tan(\frac{\pi}{4}) = 1.0\)</span> , the function usage gives pi value properly!</p>
<p>Now, if we equate or modify the value of pi somewhere in the program, then it will throw an error!</p>
<p>Like the above tan functions, you have a lot of default functions available in fortran, called as <strong>intrinsic functions!</strong>. You have an entire list! You can check it out in books, internet etc..,</p>
<p>eg:</p>
<div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="nb">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="c">! square root function</span>
<span class="n">a</span> <span class="o">=</span> <span class="nb">sin</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>          <span class="c">! sine function!</span>
</pre></div>

<h2 id="relational-and-logical-operators">Relational and Logical Operators</h2>
<div class="highlight"><pre><span></span>    <span class="c">! A simple demonstration of Logical and Relational Operators</span>
    <span class="c">! Comment/Uncomment the lines to check the relational and logical expression!</span>
    <span class="c">! Also, change the values of m and n to verify the table below </span>

<span class="k">program </span><span class="n">rel_logic</span>

    <span class="k">implicit none</span>
    <span class="c">!integer :: a, b</span>
    <span class="kt">logical</span> <span class="kd">::</span> <span class="n">m</span><span class="p">,</span><span class="n">n</span>
    
    <span class="c">!a = 5</span>
    <span class="c">!b = 4</span>
    <span class="n">m</span> <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
    <span class="n">n</span> <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
    
<span class="c">!    print *, &quot;A = &quot;,a,&quot;, B = &quot;,b</span>
<span class="c">!    print *, &quot;A == B? :&quot;, a==b</span>
<span class="c">!    print *, &quot;A &gt; B? :&quot;, a&gt;b</span>
<span class="c">!    print *, &quot;A &lt; B? :&quot;, a&lt;b</span>
<span class="c">!    print *, &quot;A &gt;= B? :&quot;, a&gt;=b</span>
<span class="c">!    print *, &quot;A &lt;= B? :&quot;, a&lt;=b</span>
<span class="c">!    print *, &quot;A /= B? :&quot;, a/=b</span>
    
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;M = &quot;</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="s2">&quot; N = &quot;</span><span class="p">,</span><span class="n">n</span>
    <span class="c">!print *, &quot;.not.M = &quot;, .not.m</span>
    <span class="c">!print *, &quot;M or N? :&quot;, m.or.N</span>
    <span class="c">!print *, &quot;M and N? :&quot;, m.and.n</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;M eqv N? :&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">eqv</span><span class="p">.</span><span class="n">n</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;M neqv N? :&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">neqv</span><span class="p">.</span><span class="n">n</span>
    
    <span class="c">! == .eq. equal to</span>
    <span class="c">! &gt; .gt. greater than</span>
    <span class="c">! &lt; .lt. less than</span>
    <span class="c">! &gt;= .ge. greater than or equal to</span>
    <span class="c">! &lt;= .le. less than or equal to</span>
    <span class="c">! /= .ne. not equal to</span>

    <span class="c">! .true. or .false.</span>
    <span class="c">! .not.(exp1)</span>
    <span class="c">! (exp1).and.(exp2)</span>
    <span class="c">! (exp1).or.(exp2)</span>
    <span class="c">! (exp1).eqv.(exp2)</span>
    <span class="c">! (exp1).neqv.(exp2)</span>
    
    <span class="c">! U PEMDAS REL_OP LOG_OP</span>
    <span class="c">! This is a full fledged operator precedence</span>
    <span class="c">! Unary PEMDAS Relative operators Logical Operators</span>
    <span class="c">! Unary +5, -7 ! N/A: ++ --</span>
    
    <span class="c">! a    .not.a   0 = .false.</span>
    <span class="c">! 1     0       1 = .true.</span>
    <span class="c">! 0     1</span>
    
    <span class="c">!____________________________________________________________</span>
    <span class="c">!    |      |          |           |            |            |</span>
    <span class="c">! a  |   b  | a.and.b  |  a.or.b   |   a.eqv.b  |   a.neqv.b |</span>
    <span class="c">!____|______|__________|___________|____________|____________|</span>
    <span class="c">!    |      |          |           |            |            |</span>
    <span class="c">! 0  |   0  |     0    |     0     |      1     |     0      |</span>
    <span class="c">! 0  |   1  |     0    |     1     |      0     |     1      |</span>
    <span class="c">! 1  |   0  |     0    |     1     |      0     |     1      |</span>
    <span class="c">! 1  |   1  |     1    |     1     |      1     |     0      |</span>
    <span class="c">!____|______|__________|___________|____________|____________|</span>

<span class="k">end program </span><span class="n">rel_logic</span>
</pre></div>

<h2 id="characters-and-strings">Characters and Strings</h2>
<p>This program explains the concept nicely!</p>
<div class="highlight"><pre><span></span><span class="c">! Program for defining and printing strings</span>

<span class="k">program </span><span class="n">strings</span>

    <span class="k">implicit none</span>

    <span class="c">!character :: a ! a can store just one character = symbol or a 1 digit </span>
                   <span class="c">! number or a single alphabet</span>
    <span class="c">!character (len=5) :: b ! b is a 5 character long string</span>

    <span class="c">!character(5) :: b</span>
    <span class="c">!character*5 :: b</span>
    <span class="c">!character :: b*5</span>

    <span class="c">!character :: c*6, d*10, e*3</span>
    
    <span class="c">!array of strings declarations</span>
    
    <span class="c">!character (len=6), dimension(2) :: str1 ! str1 will have two </span>
    <span class="c">!strings each of 6 characters in length</span>
    
    <span class="c">!character (6), dimension(2) :: str1</span>
    <span class="c">!character*6, dimension(2) :: str1  </span>
    <span class="c">!character, dimension(2) :: str1*6!, str2*7, str3*10 </span>

<span class="c">!    a = &#39;X&#39;</span>
<span class="c">!    !a = &quot;X&quot; ! Alternate expression</span>
<span class="c">!    b = &#39;white&#39;</span>
<span class="c">!    c = &quot;456321&quot;</span>
<span class="c">!    d = &quot;asd567jk^%&quot;</span>
<span class="c">!    e = &quot;_ _&quot;</span>

<span class="c">!    print *, &quot;a = &quot;,a</span>
<span class="c">!    print *, &quot;b = &quot;,b</span>
<span class="c">!    print *, &quot;c = &quot;,c</span>
<span class="c">!    print *, &quot;d = &quot;,d</span>
<span class="c">!    print *, &quot;e = &quot;,e</span>

    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;My name is Arun, written in double quotes&quot;</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s1">&#39;My name is Arun, written in single quotes&#39;</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;He is my friend&#39;s teacher&quot;</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s1">&#39;He is my friend&quot;s teacher&#39;</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s1">&#39;My friend said, &quot;I am fine!&quot;, and I moved on!&#39;</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;My friend said, &#39;I am fine!&#39;, and I moved on!&quot;</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;My friend said, &quot;&quot;I am fine!&quot;&quot;, and I moved on!&quot;</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s1">&#39;My friend said, &#39;&#39;I am fine!&#39;&#39;, and I moved on!&#39;</span>

<span class="c">!    str1(1) = &quot;Carrom&quot;</span>
<span class="c">!    str1(2) = &#39;Cod ng&#39;</span>
    
<span class="c">!    ! read *, str1(1), str1(2)</span>
    
<span class="c">!    print *, &quot;First string: &quot;, str1(1), &quot; Second string: &quot;, str1(2) </span>
    

<span class="k">end program </span><span class="n">strings</span>
</pre></div>

<h2 id="modulus-operation">Modulus Operation</h2>
<p>Modulus operation returns the remainder of a division. This function works for both integers and real numbers.</p>
<div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="mi">51</span>
<span class="n">e</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">d</span><span class="o">/</span><span class="n">e</span>      <span class="c">! Quotient is 5</span>
<span class="n">m</span> <span class="o">=</span> <span class="nb">mod</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">)</span> <span class="c">! Reminder is 1</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">5</span><span class="mf">1.04</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="mf">0.0</span>
<span class="n">qr</span> <span class="o">=</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span>      <span class="c">! Quotient is 5.104</span>
<span class="n">mr</span> <span class="o">=</span> <span class="nb">mod</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="c">! Reminder is 1.04</span>
</pre></div>

<h2 id="exectution-from-terminal">Exectution from Terminal</h2>
<p>To execute the file in Unix/Linux prompt with bash,</p>
<ul>
<li>Compile and link the file first to get the objects</li>
</ul>
<div class="highlight"><pre><span></span>gfortran filename.ext
</pre></div>

<p>For example:</p>
<div class="highlight"><pre><span></span>gfortran triangle.f95
</pre></div>

<p>This will create object files, link them and creates a default executable file a.out</p>
<ul>
<li>Run the file by</li>
</ul>
<div class="highlight"><pre><span></span>./a.out
</pre></div>

<p>the executable file’s name is a historic practice. The executable is machine specific. You cannot use the a.out in some other machines. It is resolved by compiling and then executing the file.</p>
<p>To have a different executable file name, use -o flag while compiling and linking.</p>
<div class="highlight"><pre><span></span>gfortran filename.ext -o exec_filename.ext <span class="o">(</span>this extension can be .exe also<span class="o">)</span>
</pre></div>

<p>To compile alone, use -c flag</p>
<div class="highlight"><pre><span></span>gfortran -c filename.ext
</pre></div>

<p>To link it, use -o flag with the .o files</p>
<div class="highlight"><pre><span></span>gfortran filename.o -o exec_filename.ext 
</pre></div>

<p>To save the output of the executed file, use,</p>
<div class="highlight"><pre><span></span>./exec_filename.ext &gt; result_filename.ext
</pre></div>

<p>eg:</p>
<div class="highlight"><pre><span></span>./main.exe &gt; output.txt
</pre></div>

<h2 id="conditional-statements-and-loops">Conditional Statements and Loops</h2>
<h3 id="if-statement">If statement</h3>
<p>Code segment to find the quadrant of a point (x,y) using the magnitudes of x and y</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">then</span> <span class="c">! First condition</span>
   <span class="n">q</span> <span class="o">=</span> <span class="mi">1</span> <span class="c">! Statements to be executed if condition is true</span>
<span class="k">else if</span> <span class="p">(</span><span class="n">x</span><span class="o">&lt;=</span><span class="mi">0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="n">y</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">)</span> <span class="k">then</span> <span class="c">! Condition to check if all above conditions are false</span>
   <span class="n">q</span> <span class="o">=</span> <span class="mi">2</span> <span class="c">! Statements to be executed if condition is true</span>
<span class="k">else if</span> <span class="p">(</span><span class="n">x</span><span class="o">&lt;=</span><span class="mi">0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="n">y</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span> <span class="k">then</span> <span class="c">! Condition to check if all above conditions are false</span>
   <span class="n">q</span> <span class="o">=</span> <span class="mi">3</span> <span class="c">! Statements to be executed if condition is true</span>
<span class="k">else</span>
<span class="k">   </span><span class="n">q</span> <span class="o">=</span> <span class="mi">4</span> <span class="c">! Statements to be executed if all the above conditions are false</span>
<span class="k">end if</span>   <span class="c">!this line is necessary</span>

<span class="c">! else if and else statements are optional</span>
</pre></div>

<h3 id="do-statement">do statement</h3>
<p>syntax:</p>
<div class="highlight"><pre><span></span><span class="k">do </span><span class="n">serial</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">increment</span> 
<span class="c">!serial is an integer variable that varies from 1 to k. if increment is absent, the default value is 1.</span>
   <span class="c">! Set of statements 1</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="o">-</span><span class="n">x</span><span class="p">)</span> <span class="k">cycle</span>  
    <span class="c">!the presence of keyword cycle transfers control back to do statement if condition-x is satisfied.</span>
       <span class="c">! Set of statements 2</span>
    <span class="c">!the presence of keyword cycle avoids statement-2 if condition-x is satisfied.</span>
<span class="k">end do</span>
</pre></div>

<p>The iterating variable increases till end+increment and then checks the condition. Since the condition will break, the loop for end+increment will not happen.</p>
<p>code to generate geometric sequences</p>
<div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c">! First term</span>
<span class="n">r</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="c">! Common ratio</span>

<span class="k">do </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span> <span class="c">!i = 0, 1, 2, 3, ...., n</span>
   <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The value &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot; of the series is: &quot;</span><span class="p">,</span> <span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="n">r</span><span class="o">**</span><span class="n">i</span><span class="p">)</span>
<span class="k">end do</span>
</pre></div>

<p><code>exit</code> command is used to quit the loop and come out. Exit command is used explicitly inside do loop with if statement.</p>
<p>Code for n successive factorials using labels:</p>
<div class="highlight"><pre><span></span><span class="n">outer_do_loop</span><span class="p">:</span> <span class="k">do </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span>
        
    <span class="c">!print *, &quot;Inside the loop, i = &quot;,i</span>
    <span class="n">fact</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="c">! j can be modified and used here!</span>
    <span class="c">! i can be only used here!</span>
    <span class="n">inner_do_loop</span><span class="p">:</span> <span class="k">do </span><span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span>
        
        <span class="c">! i and j cannot be modified here!</span>
        <span class="c">! i and j can be used here!</span>
        <span class="n">fact</span> <span class="o">=</span> <span class="n">fact</span><span class="o">*</span><span class="n">j</span>

    <span class="k">end do </span><span class="n">inner_do_loop</span>
    <span class="c">! j can be modified and used here!</span>
    <span class="c">! i can be only used here!</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The factorial of &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot; is:&quot;</span><span class="p">,</span> <span class="n">fact</span>

<span class="k">end do </span><span class="n">outer_do_loop</span>
</pre></div>

<h3 id="cautions-in-do-loop">Cautions in do loop</h3>
<ul>
<li>do loops must be sandwitched! Loops cannot overlap!</li>
<li>loops can be within the other or nested!</li>
<li>use labels for clarity - if you need</li>
<li>if a label is used to name a do loop, then the end do statement must also have the label name</li>
<li>The iterating variable cannot be modified inside the loop.</li>
</ul>
<h3 id="do-while">Do while</h3>
<p>This do loop is actually a while loop.</p>
<p>syntax:</p>
<div class="highlight"><pre><span></span><span class="k">do while</span> <span class="p">(</span><span class="n">condition</span><span class="p">)</span>
    <span class="c">!set of statements</span>
    <span class="c">!one condition breaking statement</span>
<span class="k">end do</span>
</pre></div>

<h2 id="labels">Labels</h2>
<p>This looping is also possible using labels.</p>
<p>eg:</p>
<div class="highlight"><pre><span></span><span class="k">do </span><span class="n">label_name</span><span class="p">:</span> <span class="n">serial</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">k</span>
     <span class="n">statements</span>
<span class="n">label_name</span> <span class="k">continue</span>
</pre></div>

<p>Here, the do statement starts first and executes the statement set once, and goes to the continue statement. Now, the do loop does not knows what to do. So it continues, because of the instruction given by the continue statement. Now, since it already finished the iteration with the first value of the iteration variable, it goes to the next value of the iteration variable and proceeds further.</p>
<p>The colon (:) is necessary!</p>
<p>The label_name is the place, where the continue has to be placed. That label is being referred in the do statement. This makes sure that the do statement gets the information/call from the continue statement instead of some other statement. If some other label is used, then the do loop might not work.</p>
<p>You do not need a continue statement. The label can be placed pointing some other statement also. So, the do statement, does the statements, goes to the statement where the label is pointed at, then goes to the statements inside it, goes to the label attached statement and repeats till the indices are over.</p>
<p>This label has no specific format. It is an F77 convention.   you can label loops.  </p>
<div class="highlight"><pre><span></span><span class="n">outer_do</span><span class="p">:</span> <span class="k">do</span>
<span class="k">         </span><span class="n">statement1</span>
<span class="n">inner_do</span><span class="p">:</span> <span class="k">do</span>
<span class="k">         </span><span class="n">statement2</span>
<span class="k">end do </span><span class="n">inner_do</span>
         <span class="n">statement3</span>
<span class="k">end do </span><span class="n">outer_do</span>
</pre></div>

<h2 id="select-case">Select case</h2>
<p> </p>
<div class="highlight"><pre><span></span><span class="k">select case</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>                  
         <span class="k">case</span> <span class="p">(</span><span class="n">value1</span><span class="p">)</span>                            
<span class="n">statements1</span>                      
         <span class="k">case</span> <span class="p">(</span><span class="n">value2</span><span class="p">)</span>
                 <span class="n">statements2</span>
         <span class="k">case</span> <span class="p">(</span><span class="n">value3</span><span class="p">)</span>
                 <span class="n">statements3</span>
         <span class="p">.</span>
         <span class="p">.</span>
         <span class="p">.</span>
         <span class="k">case </span><span class="n">default</span>
                 <span class="n">statement</span> <span class="k">final</span>
<span class="k">end select</span>
</pre></div>

<p>eg: assume statements for each case. note that multiple values can be fed into the case analysis as shown. case values can be .TRUE. or .FALSE. as well. default case is not mandatory.</p>
<div class="highlight"><pre><span></span><span class="k">select case</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
         <span class="k">case</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
         <span class="k">case</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
         <span class="k">case</span><span class="p">(</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">)</span>
         <span class="k">case</span><span class="p">(</span><span class="mi">11</span><span class="p">:)</span>
         <span class="k">case </span><span class="n">default</span>
</pre></div>

<h2 id="forall-loop">forall loop</h2>
<p>Fortran also has a for loop implemented as a forall. This loop can be used like any other for loop except for one condition. Each iterative loop should be independent of each other. Therefore, the loop can be done in any order instead of a serial order. <strong>So, in this strict sense, it is not a for traditional for loop</strong>. So, if one wants a <strong>strict</strong> for loop implementation, use a <strong>do</strong> loop.</p>
<p>The format is:</p>
<div class="highlight"><pre><span></span><span class="k">forall</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="p">)</span>
 <span class="n">statements</span>
<span class="k">end forall</span>
</pre></div>

<p>When executed, the compiler gets freedom to do the job in any order of i, thereby can make some optimizations to the programs. This is useful even in serial processing.</p>
<p>Nested forall is also possible, provided all the loop index can be acted together. Also, it can have masks.  eg:</p>
<div class="highlight"><pre><span></span><span class="k">forall</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="n">m</span><span class="p">,</span> <span class="n">b</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">).</span><span class="n">n</span><span class="p">.</span><span class="n">e</span><span class="p">.</span><span class="mi">0</span> <span class="p">)</span> 
    <span class="c">!the mask here is that ignore or do not calculate an expression if b(i,j) is zero</span>
    <span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="o">*</span><span class="n">j</span>
    <span class="n">c</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">b</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
<span class="k">end forall</span>
</pre></div>

<h2 id="kind-attribute">Kind attribute</h2>
<p>Kind command is used for setting the storage memory of the data type. It is useful for variables and functions. This is also used to make the variables to store a large range of numbers.</p>
<div class="highlight"><pre><span></span>    <span class="kt">integer</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span>
    <span class="kt">integer</span><span class="o">*</span><span class="mi">8</span> <span class="kd">::</span> <span class="n">a</span> <span class="c">! Alternate statement</span>
    <span class="c">! variable a is an integer variable that takes 8 bytes of memory</span>
    <span class="kt">real</span><span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="kd">::</span> <span class="n">r</span>
    <span class="kt">real</span><span class="o">*</span><span class="mi">8</span> <span class="kd">::</span> <span class="n">r</span> <span class="c">! Alternate statement</span>
    <span class="c">! variable r is a real variable that takes 4 bytes of memory</span>
</pre></div>

<p>Integers have kind = 2, 4(default), 8, 16</p>
<h2 id="limit-of-integers-and-real-numbers">Limit of Integers and Real numbers</h2>
<p>The integers and real numbers are stored in a particular manner in the memory. Each value takes some memory. The more memory a value takes, the higher the magnitude of the value can be stored.</p>
<p>For details : https://en.wikipedia.org/wiki/Integer_(computer_science)</p>
<p>So, if a proper kind statement is not used, then the values will overflow, corrupting the values finally. Precaution has to be taken to ensure that such issue does not take place. Use the kind statement properly to avoid this issue.</p>
<h2 id="arrays">Arrays</h2>
<p>declaration example:</p>
<div class="highlight"><pre><span></span><span class="kt">real</span> <span class="kd">::</span> <span class="n">array_name</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</pre></div>

<p>  sometimes it can be defined using dimension function namely</p>
<div class="highlight"><pre><span></span><span class="kt">real</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="n">size1</span><span class="p">,</span><span class="n">size2</span><span class="p">,</span><span class="n">size3</span><span class="p">,...)</span> <span class="kd">::</span> <span class="n">array_name</span>
</pre></div>

<p><strong>Here, the index is not mentioned. By default its from 1 to the given size.</strong>   The index is superb in fortran. It can be negative or positive. some definitions are</p>
<div class="highlight"><pre><span></span><span class="n">a</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">)</span> <span class="c">!5 values of a from a(-1), a(0), a(1), a(2), a(3)</span>
<span class="n">a</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span> <span class="c">!3 values similarly.</span>
<span class="k">dimension</span><span class="p">(</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span> 
<span class="c">!has 21 values from a(0) to a(20)        </span>
<span class="k">dimension</span><span class="p">(</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span> 
<span class="c">!has 441 values from a(0,0) to a(20,20)</span>
</pre></div>

<p>Based on these definitions, you can modify the indexing as per your requirement.   for array to be filled one-by-one, the order, taking a 5x5 array, is,</p>
<div class ="highlight"><pre>(1,1), (2,1), (3,1), ... (5,1),

(1,2), (2,2), (3,2), ... (5,2), and so on!</pre></div>
<p><strong>Yes the order flips! unlike other programming languages!</strong></p>
<p>This is the manner in which the values get stored in the memory as well!</p>
<p><strong>This is called as Column Contiguous Memory Storage</strong>. In normal convention, the successive elements in the memory happen to be row-wise. In Fortran, they are column-wise!</p>
<ul>
<li>This is something to be considered.</li>
<li>Also, when trying to optimize the code, it is necessary to know/have an idea of how the values are stored in the memory of the computer.</li>
<li>Because, the retrieval of these data from memory takes several orders more time than moving these values into the cache and register memory and doing the operations in ALU combined.</li>
</ul>
<p>This is a big problem when you are trying to pass arrays between different programming languages like Python or C, where the memory allocation is row based.</p>
<p>array initialisations using constructors. <code>/values/</code> is a constructor for the array.</p>
<div class="highlight"><pre><span></span><span class="n">b</span><span class="o">=</span><span class="p">(</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="o">/</span><span class="p">)</span>
<span class="n">d</span><span class="o">=</span><span class="p">(</span><span class="o">/</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span> <span class="n">increment</span><span class="p">)</span><span class="o">/</span><span class="p">)</span> <span class="c">!d = 1,2,3,....50 if increment =1 !USE OF INCREMENT IS DOUBTFUL</span>
<span class="n">c</span><span class="o">=</span><span class="p">(</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">,(</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="n">increment</span><span class="p">),</span><span class="mi">9</span><span class="o">/</span><span class="p">)</span> <span class="c">!d = 5,8,2,4,6,......40, 9 if increment =1 !USE OF INCREMENT IS DOUBTFUL</span>
</pre></div>

<p>multiple statements like the above two within the constructor are allowed.</p>
<div class="highlight"><pre><span></span><span class="kt">real</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span> 
<span class="c">!assigns all 20 values of a to 0.</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">a</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span> 
</pre></div>

<p>has</p>
<div class="highlight"><pre><span></span><span class="n">rank</span><span class="o">=</span><span class="mi">3</span> 
<span class="n">extent1</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> 
<span class="n">extent2</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> 
<span class="n">extent3</span><span class="o">=</span><span class="mi">7</span> 
<span class="n">size</span> <span class="o">=</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="o">*</span><span class="mi">7</span><span class="o">=</span><span class="mi">210</span> 
<span class="nb">shape</span> <span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">rank</span><span class="p">(),</span> <span class="nb">shape</span><span class="p">(),</span> <span class="n">size</span><span class="p">()</span> 
</pre></div>

<p>The above functions return the rank, shape and size of the arrays.</p>
<p>Arrays can be dynamic in Fortran.</p>
<h2 id="array-operations">Array Operations</h2>
<p>Array operations can be done without the need for loops.</p>
<p>eg:</p>
<p>For three arrays of size n, with indices from 1 to n,</p>
<div class="highlight"><pre><span></span><span class="k">do </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span>
     <span class="n">c</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">b</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">end do</span>
</pre></div>

<p>This can be done by the line</p>
<div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="c">!(available from F90 onwards)</span>
</pre></div>

<p>If x and y are arrays, then</p>
<div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> 
</pre></div>

<p>is an example of a component-wise operation. This operation holds good for - / * also.</p>
<p>even <code>sqrt()</code>works component-wise.</p>
<div class="highlight"><pre><span></span><span class="nb">dot_product</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="c">!calculates the dot product of x,y namely = sum of all xi*yi from i=1,n</span>
<span class="n">array2</span> <span class="o">=</span> <span class="nb">reshape</span><span class="p">(</span><span class="n">array1</span><span class="p">,</span> <span class="nb">shape</span><span class="p">)</span> <span class="c">!reshapes a given 1D array into a 2D array of the given shape.</span>
</pre></div>

<p>eg:</p>
<div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="nb">reshape</span><span class="p">((</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="o">/</span><span class="p">),</span> <span class="p">(</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="o">/</span><span class="p">))</span>
</pre></div>

<p>This will produce a three row, two column matrix. <strong>All the entries get filled COLUMNWISE instead of ROWWISE!</strong></p>
<p>Array slices can be made.</p>
<p>eg:</p>
<div class="highlight"><pre><span></span><span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="n">a</span><span class="p">(</span><span class="n">i</span><span class="p">,:)</span>  <span class="c">!this will print out the ith row.</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="nb">transpose</span><span class="p">(</span><span class="k">array</span><span class="p">)</span> <span class="c">!transposes the matrix/array</span>
<span class="n">C</span> <span class="o">=</span> <span class="nb">matmul</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="c">!does the matrix multiplication of a,b. Applicable to vectors also.</span>
</pre></div>

<h2 id="array-memory-allocations">Array Memory Allocations</h2>
<p>Fortran needs to know the size of the arrays beforehand for allocating memory. But usually, the size of the array is not known until it is run/executed.</p>
<p>F77 has two ways to resolve this:</p>
<ol type="1">
<li>Allocate a very large array for any application</li>
<li>Use “Work arrays” and partition it into pieces.</li>
</ol>
<p>The second approach is used in LAPACK as well. Work arrays are very large arrays allocated initially. Later, when the size of the variable arrays are known, the work array is broken (to be precise, partitioned) to have a small piece of memory out of it to fit the variable array. The starting address as well as the data of the array are sent into it and they get stored.</p>
<p>Similar process happens for other arrays. They get allocated in some other portion of this big Work array. This is a crude method.</p>
<p>Dynamic allocation is the solution to it. This started from F90 and extends in all future versions. This avoids the need for F77 protocols for storing array data.</p>
<p>The arrays get dynamically allocated.</p>
<p>dynamic arrays are to be declared as below</p>
<div class="highlight"><pre><span></span><span class="k">allocatable</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">a</span> 
<span class="c">!This tells the compiler that array a&#39;s memory is dynamic</span>
<span class="c">! get a value n and allocate a as,</span>
<span class="k">allocate</span> <span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> 
<span class="c">!a value ranges from a(1) to a(n)</span>

<span class="k">allocatable</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(:,:)</span> <span class="kd">::</span> <span class="n">b</span>
<span class="c">! get values for m and n and allocate b as,</span>

<span class="k">allocate</span><span class="p">(</span><span class="n">b</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
</pre></div>

<p>This can be extended to multi-dimensional arrays also.</p>
<p>To deallocate them, use the deallocate command.</p>
<div class="highlight"><pre><span></span><span class="k">deallocate</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="k">deallocate</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>

<p>To ensure that you do not run out of space, use the optional stat argument. eg:</p>
<div class="highlight"><pre><span></span><span class="k">allocate</span><span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="nb">stat</span><span class="o">=</span><span class="n">alloc_error</span><span class="p">)</span>
</pre></div>

<div class ="highlight"><pre>if alloc_error /= 0, </pre></div>
<p>then you have an insufficient memory. Otherwise, it is fine.</p>
<p><strong>Caution: Be careful while passing arrays and scalars into subroutines. If a scalar is passed, and it is treated as an array inside the subroutine, it will change the values of the other variables! Vice-Versa also happens. In older versions, not even a warning will appear and the program will be executed. In newer versions, the program will be executed with warnings. Because, when you pass an element into a subroutine, the variable address is passes into it. Sometimes you get a SEGMENTATION FAULT, meaning, the program is trying to write values in certain parts of the memory that it has no access or permission to. To check these, use -fbounds-check flags while compiling the code. (these are gfortran flags)</strong></p>
<h2 id="fortran-flags-and-gdb">Fortran Flags and gdb</h2>
<p>These are optional checks or conditions to look for when you are compiling the code or executing it.</p>
<p>check: http://gcc.gnu.org/onlinedocs//gcc-3.4.5/gcc/Optimize-Options.html for a detailed list of gcc compiler flags and explanations.</p>
<ul>
<li><p>-c is for compile only</p></li>
<li><p>-o is for linking object files to make an executable</p></li>
<li><p>-fbounds-check is for checking the bound limits of arrays and for checking the size limits of variables</p></li>
<li><p>-g is the debugger flag to indicate (if possible) where things went wrong.</p></li>
<li><p>-o2 is for compiling the codes with level 2 optimization.</p></li>
<li><p>-o3 is for compiling the codes with level 3 optimization.</p></li>
<li><p>-fgcse (global common sub-expression elimination) is for translating the code into an optimized machine code by collecting the common expressions that are occurring repeatedly in the code, makes it a variable, and then uses it. Saves execution time by reducing the number of operations to be done. This is kind of taken care in -o2 or -o3 optimizations.</p></li>
<li><p>-finline-functions is for compiling the code, by replacing the function calls with a direct in-line representation of the function. Wherever the function call happens, instead of going to the function, the statements of the function are brought to the code having the function call directly. This avoids the need for creating dummy variables, switching between programs etc., This makes a big difference when an array is processed by the functions, or the function is being called within a loop.</p></li>
</ul>
<p>If there is a problem in the file while using the -g flag there will be indications. Then type,</p>
<div class ="highlight"><pre>gdb executable_filename.ext</pre></div>
<p>to have a full pass at the file and you will get a gdb prompt. Type run to get an indication as to where the problem is.</p>
<p>gdb is similar to Python Debugger (pdb) use help in gdb prompt to get all the available commands.</p>
<h2 id="goto-statement">Goto statement</h2>
<p>Go to statement is used for force shifting the line of execution to some other part of the program.</p>
<p>syntax:</p>
<div class="highlight"><pre><span></span>  <span class="n">go</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">LABEL</span><span class="o">&gt;</span>
</pre></div>

<p>eg:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">some</span> <span class="n">condition</span><span class="p">)</span> <span class="n">go</span> <span class="n">to</span> <span class="mi">99</span>
<span class="c">! lot of lines of code in between!</span>
<span class="mi">99</span> <span class="k">continue</span>
<span class="k">    </span><span class="n">set</span> <span class="n">of</span> <span class="n">statements</span>
<span class="c">! continue statement is used to continue the execution. That is all.</span>
</pre></div>

<h2 id="functions-simple">Functions – Simple</h2>
<p>Functions in fortran are similar to other functional definitions in other languages.</p>
<p>Functions can take one or more arguments and return a value.</p>
<p>eg:</p>
<div class ="highlight"><pre>y = f(x) or z = f(x,y)</pre></div>
<p>Usage in fortran:</p>
<div class="highlight"><pre><span></span><span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span> <span class="k">external</span> <span class="kd">::</span> <span class="n">f</span>
</pre></div>

<p>“External” is used to tell that the definition is available elsewhere.</p>
<p>Within the program script, but outside program, end program lines, the definition of the function should be mentioned.</p>
<p>See the example below for clarification.</p>
<p>Sample Program:</p>
<div class="highlight"><pre><span></span><span class="c">! Program to experiment with functions</span>
<span class="c">! The function is the implementation of hero&#39;s formulae</span>
<span class="c">! For calculating the area of a triangle</span>

<span class="k">program </span><span class="n">functions_example</span>

    <span class="k">implicit none</span>
<span class="k">    </span><span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">Area</span>
    <span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span> <span class="k">external</span> <span class="kd">::</span> <span class="n">tri_area_ssa</span><span class="p">,</span> <span class="n">semi</span>

    <span class="c">! External indicates that the definitions for them are given</span>
    <span class="c">! Outside the program.</span>

    <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">semi</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> 
    <span class="c">! Invoking one function</span>

    <span class="n">Area</span> <span class="o">=</span> <span class="n">tri_area_ssa</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
    <span class="c">! Invoking another function</span>

    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The semi-perimeter of the triangle is :&quot;</span><span class="p">,</span><span class="n">s</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;Area of the triangle using Hero&#39;s Formula is :&quot;</span><span class="p">,</span><span class="n">Area</span>

<span class="k">end program </span><span class="n">functions_example</span>

<span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">function </span><span class="n">semi</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
<span class="c">! Note that the data type definition is needed for the return value</span>

    <span class="k">implicit none</span>
<span class="k">    </span><span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>
    <span class="c">! intent() is a built-in-function that indicates whether the variables</span>
    <span class="c">! are passed into or passed out of the function or both.</span>
    <span class="c">! Here, these variables are being passed into the function and</span>
    <span class="c">! hence the argument &quot;in&quot;.</span>

    <span class="n">semi</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="p">)</span>

<span class="k">end function </span><span class="n">semi</span>

<span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">function </span><span class="n">tri_area_ssa</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>

    <span class="k">implicit none</span>
<span class="k">    </span><span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">s</span>
    <span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="kd">::</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">-</span><span class="n">a</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">-</span><span class="n">b</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">s</span><span class="o">-</span><span class="n">c</span>

    <span class="n">tri_area_ssa</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>

<span class="k">end function </span><span class="n">tri_area_ssa</span>
</pre></div>

<h2 id="intent-functions">Intent functions</h2>
<p>Intent is a built-in-function used inside other functions and subroutines to indicate the nature of the variables involved.</p>
<div class="highlight"><pre><span></span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="p">:</span> <span class="c">!This means that the variable is passed into the function/subroutine/module and it&#39;s values should not be changed inside it.</span>
 <span class="k">intent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="p">:</span> <span class="c">!This means that the variable is passed into the function/subroutine/module may not have a value, and thereby can be assigned a value and passed out of it.</span>
 <span class="k">intent</span><span class="p">(</span><span class="n">inout</span><span class="p">)</span> <span class="p">:</span> <span class="c">!This means that the variable is passed into the function/subroutine/module and it can be altered and can be passed out of the function.</span>
</pre></div>

<p>These are not necessary sometimes, but it is a good practice to follow their usage.</p>
<h2 id="subroutine">Subroutine</h2>
<p>A subroutine is similar to a function. It is not invoked, but rather called in.</p>
<p>Subroutine is an extended and advanced version of a function. It can have multiple arguments passed into it. It can also pass out multiple arguments.</p>
<p>Also, it can pass out the variables passed into it by making changes to them.</p>
<p>This is very essential for complicated programming algorithms.</p>
<p>How to call it?</p>
<div class="highlight"><pre><span></span><span class="k">call </span><span class="n">subroutine_name</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>

<p>Subroutines can modify and pass arrays. Functions cannot! They follow the same procedure as that of other variables, the “dimension” type has to be mentioned to in inside the subroutine as well as outside the subroutine. Also, you may have to pass the size of the arrays is needed.</p>
<p>Subroutines can be defined within the script or outside in a new script.</p>
<p>This is an example:</p>
<p>Sample Program:</p>
<div class="highlight"><pre><span></span><span class="c">! Program to experiment with subroutine</span>
<span class="c">! The subroutine is the implementation of hero&#39;s formulae</span>
<span class="c">! For calculating the area of a triangle</span>

<span class="k">program </span><span class="n">subroutines_example</span>

    <span class="k">implicit none</span>
<span class="k">    </span><span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">Area</span>

    <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c">! s is intentionally set to 0 so that it gets modified inside</span>
    <span class="c">! the sub-routine call. Area is not set any value. This is</span>
    <span class="c">! to see that the subroutine assigns a value to it.</span>

    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;A=&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="s2">&quot;B=&quot;</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="s2">&quot;C=&quot;</span><span class="p">,</span><span class="n">c</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;S=&quot;</span><span class="p">,</span><span class="n">s</span>

    <span class="k">call </span><span class="n">tri_area_ssa</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">Area</span><span class="p">)</span>
    <span class="c">! This is the subroutine call !</span>

    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;A=&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="s2">&quot;B=&quot;</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="s2">&quot;C=&quot;</span><span class="p">,</span><span class="n">c</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;The semi-perimeter of the triangle is :&quot;</span><span class="p">,</span><span class="n">s</span>
    <span class="k">print</span> <span class="o">*</span><span class="p">,</span> <span class="s2">&quot;Area of the triangle using Hero&#39;s Formula is :&quot;</span><span class="p">,</span><span class="n">Area</span>

<span class="k">end program </span><span class="n">subroutines_example</span>

<span class="k">subroutine </span><span class="n">tri_area_ssa</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">Area</span><span class="p">)</span>

    <span class="k">implicit none</span>
<span class="k">    </span><span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span> <span class="kd">::</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>
    <span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Area</span>
    <span class="c">! This is for making an assignment to Area, as Area has no value</span>
    <span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="n">inout</span><span class="p">)</span> <span class="kd">::</span> <span class="n">s</span>
    <span class="c">! This is for altering s, as s has a value to it.</span>
    <span class="kt">real</span> <span class="p">(</span><span class="nb">kind</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="kd">::</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span>

    <span class="n">s</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">s</span><span class="o">-</span><span class="n">a</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">s</span><span class="o">-</span><span class="n">b</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">s</span><span class="o">-</span><span class="n">c</span>

    <span class="n">Area</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="o">*</span><span class="n">z</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>

<span class="k">end subroutine </span><span class="n">tri_area_ssa</span>
</pre></div>

<h2 id="modules">Modules</h2>
<p>Modules are big chunks of programs written separately. It can have it’s own variables, functions and subroutines. Modules are like header files in C or like import file modules in Python.  </p>
<p>Format of a module goes like this:</p>
<div class="highlight"><pre><span></span><span class="k">module</span> <span class="o">&lt;</span><span class="k">module </span><span class="n">name</span><span class="o">&gt;</span>
     <span class="c">!variables and statements</span>
<span class="k">contains</span>
     <span class="c">!definitions for subroutines/functions</span>
<span class="k">end module</span> <span class="o">&lt;</span><span class="k">module </span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>

<p>To use the module in a program/subroutine/function:</p>
<div class="highlight"><pre><span></span><span class="k">program </span><span class="n">program_name</span>
     <span class="k">use</span> <span class="o">&lt;</span><span class="k">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="c">!This has to come before using other variables/statements</span>
     <span class="c">!variable declarations and statements for program</span>
<span class="k">end </span><span class="n">program_name</span>
</pre></div>

<p>To import only a function/part of a module, use only command</p>
<div class="highlight"><pre><span></span>     <span class="k">use</span> <span class="o">&lt;</span><span class="k">module</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">only</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">var</span> <span class="nb">or </span><span class="k">function </span><span class="nb">or </span><span class="k">subroutine</span><span class="o">&gt;</span>
</pre></div>

<p>Modules can be used to define global variables that can be used in several programs. But this is not recommended. Modules generate interface information when their variables and functions/subroutines are used. These are links to determine which variables came from which file. This helps to see whether proper arguments have been passed or not. Modules also help to create derived data type.</p>
<p>NOTE: Modules must be compiled before compiling the programs using the module! On compiling a module, it produces a .mod file and a .o file. Then, the file using the module has to be used. When compiling the program and module file together, put the module file first and then the program file.</p>
<p>eg:</p>
<div class ="highlight"><pre>gfortran module_file.f90 prog.f90</pre></div>
<p>You cannot put variables inside module. Only parameters are allowed. Variables are allowed inside the functions and subroutines of a module. To make a variable, use the “save” keyword after the variable declarations. This command makes sure that any value that gets assigned to the variable is available in all the programs using the module. Like a global variable. While calling the module, use “call another_subroutine()” subroutine to set it’s value. This subroutine should have the variables defined and set with a value. eg:</p>
<div class="highlight"><pre><span></span><span class="k">implicit none</span>
<span class="kt">real</span> <span class="kd">::</span> <span class="n">pi</span>
<span class="k">save</span>
</pre></div>

<h2 id="pure-keyword">Pure Keyword</h2>
<p>This keyword is used for making subroutines, modules and functions free from global variables and alterations. To declare them, use</p>
<p>pure function/module/subroutine name and that is all.</p>
<p>pure keyword can be used if the function/module/subroutine is incapable of or does not 1. altering global variables 2. altering input variables in case of functions. 3. making local variables global with save command 4. having I/O</p>
<p>pure keyword makes them thread safe during parallelizing processes. So, this can be used for both parallel and serial runs. This is beneficial even for serial runs, as it helps the compiler to make some more optimizations during compilation and execution.</p>
<h2 id="getting-excess-precision">Getting Excess Precision</h2>
<p>The registers and ALU of a PC are designed for more precision than the memory storage. So, you can force the results to be more consistent and precise by compiling and executing the files with the flags, -ffloat - store</p>
<p>This causes the variables to be written out of the registers, back into the cache, before the same value can be used again.</p>
<p>Usually, when a value is taken by the cache, it gets modified in the CPU and then goes to the memory via cache. They do not get altered in the cache. The cache changes the values directly in the memory. So, the values in the cache remains unaffected till the cache line cycle is over.</p>
<p>The above flags, manipulate the registers to change the value in the cache (which does not happen in normal times). So, when the same value is used somewhere else, instead of the older value, the updated value gets used.</p>
<p>The problem is, during the intermediate operations, these additional precision digits may stay or may not get properly written in the cache. This varies between systems, programs, compilers and even the algorithms/routines and the way they are used.</p>
<p>You can try this for fun, but do not anticipate the same answer in other machines or while doing the execution in some other way. This trick is recommended to try when you implement the same code, in a normal usual way, in different machines but get different results, with one reason possibly because of dilemma in truncations. Sometimes, this is good, but some times, it destroys reproducibility. Because, this tweaking works differently in different systems and architecture.</p>
<p>This is one of the several kind of a problems that used to happen in olden days when many people made computer systems, because each manufacturer used to make their own way of doing computer arithmetic. After standardization, the problems got mitigated very much. But some issues still pop-up.</p>
<h2 id="timing-code-in-fortran">Timing Code in Fortran</h2>
<p>There is a subroutine named system clock to measure the time taken for a code to be executed completely. To use it,</p>
<div class="highlight"><pre><span></span><span class="k">call </span><span class="nb">system_clock</span><span class="p">(</span><span class="n">var1</span><span class="p">,</span> <span class="n">var2</span><span class="p">)</span> <span class="c">!both variables are to be integers</span>
</pre></div>

<p>Variable 1 will have the elapsed clock cycles of the system from the point where the code is executed to the current line. The unit will be cycles.</p>
<p>Variable 2 will have the clock rate or the rate at which the system/cpu is operating. The unit will be cycles per second.</p>
<p>eg:</p>
<div class="highlight"><pre><span></span><span class="k">call </span><span class="nb">system_clock</span><span class="p">(</span><span class="n">tclock1</span><span class="p">)</span>
 <span class="c">! &lt;code to be executed&gt;</span>
<span class="k">call </span><span class="nb">system_clock</span><span class="p">(</span><span class="n">tclock2</span><span class="p">,</span> <span class="n">rate</span><span class="p">)</span>

<span class="n">elapsed_time</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">tclock2</span> <span class="o">-</span> <span class="n">tclock1</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
</pre></div>

<p>To look at the cpu time, use <code>cpu_time subroutine</code></p>
<p>eg:</p>
<div class="highlight"><pre><span></span><span class="k">call </span><span class="nb">cpu_time</span><span class="p">(</span><span class="n">time1</span><span class="p">)</span> <span class="c">!the variable is a float with time in seconds.</span>
  <span class="c">! &lt;code to be executed&gt;</span>
<span class="k">call </span><span class="nb">cpu_time</span><span class="p">(</span><span class="n">time2</span><span class="p">)</span>

<span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">time2</span> <span class="o">-</span> <span class="n">time1</span>
</pre></div>

<h2 id="blas-lapack">BLAS LAPACK</h2>
<p>BLAS (Basic Linear Algebra Subroutines) and LAPACK (LA Pack or Linear Algebra Package) are linear algebra and scientific packages used by Fortran, Matlab, Python, Scilab and many other programs. LAPACK kind of depends on BLAS for some of it’s functions.</p>
<p>They provide functions and sub-routine definitions for performing the above mentioned operations. They are made in both C and Fortran.</p>
Fortran does not have an equivalent of Matlab’s A

            </div>
        </section>
		
        <!-- Footer -->
<footer id="footer" class="">
	<div class="inner">
		<ul class="icons">
			<li><a href="https://www.quora.com/profile/Arun-Prasaad-Gunasekaran" target="_blank" class="icon alt fa-quora"><span class="label">Quora</span></a></li>
			<li><a href="https://www.youtube.com/channel/UCUJFj-PXuWLRfFFHA44ZGYw" target="_blank" class="icon alt fa-youtube-play"><span class="label">YouTube</span></a></li>
			<li><a href="https://github.com/arunprasaad2711" target="_blank" class="icon alt fa-github"><span class="label">GitHub</span></a></li>
			<li><a href="https://www.instagram.com/fluidiccolours/" target="_blank" class="icon alt fa-instagram"><span class="label">Instagram</span></a></li>
			<li><a href="mailto:arunprasaad2711@gmail.com" target="_blank" class="icon alt fa-envelope-o"><span class="label">Mail</span></a></li>
		</ul>
		<p>
			Copyright &copy; 2018 - <script type="text/javascript">
				document.write(new Date().getFullYear());
			  </script> | Arun Prasaad Gunasekaran | Design: <a href="https://html5up.net" target="_blank">HTML5 UP</a>
		</p>
	</div>
</footer>
        
    </div>

    <!-- McAfee Trust mark -->
<script type="text/javascript" src="https://cdn.ywxi.net/js/1.js" async></script>

<!-- D3Js library for plotting -->
<!-- script src="https://d3js.org/d3.v5.min.js"></script-->

<!-- Plotly.js for plotting -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- PrettifyJS for syntax highlighting - use this with redcarpet. -->
<!-- <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?&skin=desert"></script> -->

<!-- Code highlight using Highlighter JS - to be used with pandoc + no default pandoc highlights -->
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script> -->


    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/js/jquery.scrolly.min.js"></script>
    <script src="../../assets/js/jquery.scrollex.min.js"></script>
    <script src="../../assets/js/browser.min.js"></script>
    <script src="../../assets/js/breakpoints.min.js"></script>
    <script src="../../assets/js/util.js"></script>
    <script src="../../assets/js/main.js"></script>
    <script src="../../assets/js/my_functions/helpers.js"></script>
    <!-- <script src="../../assets/css/prism.js"></script> -->


    <!-- google prettytype class adder using jquery. -->
    <!-- <script>
        $(document).ready(function(){
            $("code").addClass('prettyprint');
            $("pre").addClass('prettyprint');
        });
    </script> -->

</body>
</html>
